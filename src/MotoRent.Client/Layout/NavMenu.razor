@* Tabler horizontal navigation menu - Only visible for tenant users (not SuperAdmin without impersonation) *@
@using MotoRent.Domain.Core
@inherits LocalizedComponentBase<NavMenu>

@* These menus are for tenant operations - only visible to users with tenant roles *@
@* SuperAdmin without impersonation should NOT see these menus *@

<ul class="navbar-nav">
    @* Dashboard - visible to tenant users with any role *@
    <AuthorizeView Roles="@TenantRoles">
        <li class="nav-item">
            <a class="nav-link" href="/">
                <span class="nav-link-icon">
                    <i class="ti ti-dashboard"></i>
                </span>
                <span class="nav-link-title">@Localizer["Dashboard"]</span>
            </a>
        </li>
    </AuthorizeView>

    @* Rentals - visible to RentalRoles (OrgAdmin, ShopManager, Staff) *@
    <AuthorizeView Roles="@RentalRoles">
        <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown" role="button" aria-expanded="false">
                <span class="nav-link-icon">
                    <i class="ti ti-receipt"></i>
                </span>
                <span class="nav-link-title">@Localizer["Rentals"]</span>
            </a>
            <div class="dropdown-menu">
                <a class="dropdown-item" href="/rentals">
                    <i class="ti ti-list me-2"></i>@Localizer["ActiveRentals"]
                </a>
                <a class="dropdown-item" href="/rentals/checkin">
                    <i class="ti ti-login me-2"></i>@Localizer["CheckIn"]
                </a>
                <a class="dropdown-item" href="/rentals/checkout">
                    <i class="ti ti-logout me-2"></i>@Localizer["CheckOut"]
                </a>
            </div>
        </li>
    </AuthorizeView>

    @* Finance - visible to ManagementRoles (OrgAdmin, ShopManager) *@
    <AuthorizeView Roles="@ManagementRoles">
        <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown" role="button" aria-expanded="false">
                <span class="nav-link-icon">
                    <i class="ti ti-building-bank"></i>
                </span>
                <span class="nav-link-title">@Localizer["Finance"]</span>
            </a>
            <div class="dropdown-menu">
                <a class="dropdown-item" href="/payments">
                    <i class="ti ti-credit-card me-2"></i>@Localizer["Payments"]
                </a>
                <a class="dropdown-item" href="/deposits">
                    <i class="ti ti-wallet me-2"></i>@Localizer["Deposits"]
                </a>
                <a class="dropdown-item" href="/finance/owner-payments">
                    <i class="ti ti-user-dollar me-2"></i>@Localizer["OwnerPayments"]
                </a>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item" href="/reports">
                    <i class="ti ti-chart-bar me-2"></i>@Localizer["Reports"]
                </a>
            </div>
        </li>
    </AuthorizeView>

    @* Inventory - visible to MaintenanceRoles (OrgAdmin, ShopManager, Mechanic) *@
    <AuthorizeView Roles="@MaintenanceRoles">
        <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown" role="button" aria-expanded="false">
                <span class="nav-link-icon">
                    <i class="ti ti-car"></i>
                </span>
                <span class="nav-link-title">@Localizer["Fleet"]</span>
            </a>
            <div class="dropdown-menu">
                <a class="dropdown-item" href="/vehicles">
                    <i class="ti ti-car me-2"></i>@Localizer["AllVehicles"]
                </a>
                <a class="dropdown-item" href="/accessories">
                    <i class="ti ti-headphones me-2"></i>@Localizer["Accessories"]
                </a>
            </div>
        </li>
    </AuthorizeView>

    @* Accidents - visible to RentalRoles (OrgAdmin, ShopManager, Staff) *@
    <AuthorizeView Roles="@RentalRoles">
        <li class="nav-item">
            <a class="nav-link" href="/accidents">
                <span class="nav-link-icon">
                    <i class="ti ti-alert-triangle"></i>
                </span>
                <span class="nav-link-title">@Localizer["Accidents"]</span>
            </a>
        </li>
    </AuthorizeView>

    @* Customers - visible to RentalRoles (OrgAdmin, ShopManager, Staff) *@
    <AuthorizeView Roles="@RentalRoles">
        <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown" role="button" aria-expanded="false">
                <span class="nav-link-icon">
                    <i class="ti ti-users"></i>
                </span>
                <span class="nav-link-title">@Localizer["Customers"]</span>
            </a>
            <div class="dropdown-menu">
                <a class="dropdown-item" href="/renters">
                    <i class="ti ti-user-plus me-2"></i>@Localizer["Renters"]
                </a>
            </div>
        </li>
    </AuthorizeView>

    @* Settings - visible to ManagementRoles (OrgAdmin, ShopManager) *@
    <AuthorizeView Roles="@ManagementRoles">
        <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown" role="button" aria-expanded="false">
                <span class="nav-link-icon">
                    <i class="ti ti-settings"></i>
                </span>
                <span class="nav-link-title">@Localizer["Settings"]</span>
            </a>
            <div class="dropdown-menu">
                <a class="dropdown-item" href="/insurance">
                    <i class="ti ti-shield-check me-2"></i>@Localizer["Insurance"]
                </a>
                <a class="dropdown-item" href="/settings/vehicle-pools">
                    <i class="ti ti-share me-2"></i>@Localizer["VehiclePools"]
                </a>
                <a class="dropdown-item" href="/settings/vehicle-owners">
                    <i class="ti ti-users me-2"></i>@Localizer["VehicleOwners"]
                </a>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item" href="/settings/branding">
                    <i class="ti ti-brush me-2"></i>@Localizer["PortalBranding"]
                </a>
                <a class="dropdown-item" href="/shop">
                    <i class="ti ti-building-store me-2"></i>@Localizer["ShopSettings"]
                </a>
                <a class="dropdown-item" href="/settings/schedule">
                    <i class="ti ti-calendar me-2"></i>@Localizer["OperatingSchedule"]
                </a>
                <a class="dropdown-item" href="/settings/service-locations">
                    <i class="ti ti-map-pin me-2"></i>@Localizer["ServiceLocations"]
                </a>
            </div>
        </li>
    </AuthorizeView>
</ul>

@code {
    // Tenant roles - excludes SUPER_ADMIN (platform admin)
    private static readonly string TenantRoles = string.Join(",", UserAccount.AllRoles);
    private static readonly string RentalRoles = string.Join(",", UserAccount.RentalRoles);
    private static readonly string ManagementRoles = string.Join(",", UserAccount.ManagementRoles);
    private static readonly string MaintenanceRoles = string.Join(",", UserAccount.MaintenanceRoles);
}