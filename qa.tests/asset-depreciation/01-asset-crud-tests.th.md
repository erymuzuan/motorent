# การทดสอบ CRUD สินทรัพย์

## หมวดหมู่การทดสอบ: การสร้างและจัดการสินทรัพย์

### ข้อกำหนดเบื้องต้น
- ผู้ใช้เข้าสู่ระบบในฐานะ OrgAdmin หรือ ShopManager
- มียานพาหนะอย่างน้อยหนึ่งคันในระบบที่ยังไม่มีบันทึกสินทรัพย์
- มีสิทธิ์เข้าถึงเมนูการเงิน

---

## กรณีทดสอบ 1.1: สร้างสินทรัพย์ใหม่สำหรับยานพาหนะที่มีอยู่

**วัตถุประสงค์:** ตรวจสอบว่าสามารถสร้างบันทึกสินทรัพย์ใหม่สำหรับยานพาหนะที่มีอยู่ได้

**ขั้นตอน:**
1. ไปที่ **การเงิน > แดชบอร์ดสินทรัพย์**
2. คลิกปุ่ม **"+ เพิ่มสินทรัพย์"**
3. ในหน้าต่างสินทรัพย์:
   - เลือกยานพาหนะจากรายการ (ยานพาหนะที่ยังไม่มีสินทรัพย์)
   - ป้อนวันที่ได้มา (เช่น วันนี้)
   - ป้อนต้นทุนการได้มา (เช่น 50,000 บาท)
   - ป้อนชื่อผู้ขาย (เช่น "Honda Dealer Phuket")
   - ป้อนเลขที่อ้างอิง (เช่น "INV-2025-001")
4. ตั้งค่าการคิดค่าเสื่อมราคา:
   - เลือกวิธี: **เส้นตรง**
   - ป้อนอายุการใช้งาน: **60** เดือน
   - ป้อนมูลค่าซาก: **5,000** บาท
5. คลิก **บันทึก**

**ผลลัพธ์ที่คาดหวัง:**
- [ ] สินทรัพย์ถูกสร้างสำเร็จ
- [ ] แสดงการแจ้งเตือนสำเร็จ
- [ ] เปลี่ยนเส้นทางไปยังแดชบอร์ดสินทรัพย์
- [ ] สินทรัพย์ใหม่ปรากฏในรายการสินทรัพย์
- [ ] มูลค่าตามบัญชีปัจจุบันเท่ากับต้นทุนการได้มา (ยังไม่มีค่าเสื่อมราคา)
- [ ] ค่าเสื่อมราคาสะสมแสดง 0

---

## กรณีทดสอบ 1.2: สร้างสินทรัพย์ด้วยวิธีค่าเสื่อมราคา Day Out of Door

**วัตถุประสงค์:** ตรวจสอบการสร้างสินทรัพย์ด้วยวิธีค่าเสื่อมราคา Day Out of Door

**ขั้นตอน:**
1. ไปที่ **การเงิน > แดชบอร์ดสินทรัพย์**
2. คลิก **"+ เพิ่มสินทรัพย์"**
3. ป้อนรายละเอียดสินทรัพย์พื้นฐาน (ยานพาหนะ, วันที่, ต้นทุน, ผู้ขาย)
4. ตั้งค่าการคิดค่าเสื่อมราคา:
   - เลือกวิธี: **Day Out of Door**
   - ป้อน Day Out of Door %: **20%**
   - ป้อนอายุการใช้งาน: **60** เดือน
   - ป้อนมูลค่าซาก: **5,000** บาท
5. คลิก **บันทึก**

**ผลลัพธ์ที่คาดหวัง:**
- [ ] สินทรัพย์ถูกสร้างสำเร็จ
- [ ] เปอร์เซ็นต์ Day Out of Door ถูกบันทึก
- [ ] มูลค่าตามบัญชีปัจจุบันยังคงเท่ากับต้นทุนการได้มา (ค่าเสื่อมราคาจะเกิดขึ้นเมื่อเช่าครั้งแรก)
- [ ] สินทรัพย์แสดงตัวบ่งชี้ "รอการเช่าครั้งแรก"

---

## กรณีทดสอบ 1.3: สร้างสินทรัพย์ด้วยวิธีค่าเสื่อมราคาแบบผสม

**วัตถุประสงค์:** ตรวจสอบการสร้างสินทรัพย์ด้วยวิธีผสม (Day Out of Door + เส้นตรง)

**ขั้นตอน:**
1. ไปที่ **การเงิน > แดชบอร์ดสินทรัพย์**
2. คลิก **"+ เพิ่มสินทรัพย์"**
3. ป้อนรายละเอียดสินทรัพย์พื้นฐาน
4. ตั้งค่าการคิดค่าเสื่อมราคา:
   - เลือกวิธี: **ผสม (Day Out + เส้นตรง)**
   - ป้อน Day Out of Door %: **15%**
   - ป้อนอายุการใช้งาน: **48** เดือน
   - ป้อนมูลค่าซาก: **10,000** บาท
5. คลิก **บันทึก**

**ผลลัพธ์ที่คาดหวัง:**
- [ ] สินทรัพย์ถูกสร้างด้วยวิธีผสม
- [ ] ทั้งการตั้งค่า Day Out of Door % และเส้นตรงถูกบันทึก
- [ ] แผงการตั้งค่าแสดงการกำหนดค่าที่ถูกต้อง

---

## กรณีทดสอบ 1.4: แก้ไขสินทรัพย์ที่มีอยู่

**วัตถุประสงค์:** ตรวจสอบว่ารายละเอียดสินทรัพย์สามารถแก้ไขได้

**ขั้นตอน:**
1. ไปที่ **การเงิน > แดชบอร์ดสินทรัพย์**
2. ค้นหาสินทรัพย์ที่มีอยู่ในรายการ
3. คลิกปุ่ม **แก้ไข** (ไอคอนดินสอ)
4. แก้ไขฟิลด์ต่อไปนี้:
   - ชื่อผู้ขาย (เพิ่มหรือเปลี่ยน)
   - เลขที่อ้างอิง (อัปเดต)
   - มูลค่าซาก (ปรับจาก 5,000 เป็น 8,000)
5. คลิก **บันทึก**

**ผลลัพธ์ที่คาดหวัง:**
- [ ] บันทึกการเปลี่ยนแปลงสำเร็จ
- [ ] แสดงการแจ้งเตือนสำเร็จ
- [ ] แสดงค่าที่อัปเดตในรายละเอียดสินทรัพย์
- [ ] คำนวณค่าเสื่อมราคาใหม่หากมูลค่าซากเปลี่ยนแปลง

---

## กรณีทดสอบ 1.5: ดูหน้ารายละเอียดสินทรัพย์

**วัตถุประสงค์:** ตรวจสอบว่าหน้ารายละเอียดสินทรัพย์แสดงข้อมูลที่ถูกต้อง

**ขั้นตอน:**
1. ไปที่ **การเงิน > แดชบอร์ดสินทรัพย์**
2. ค้นหาสินทรัพย์ที่มีประวัติค่าเสื่อมราคา
3. คลิกปุ่ม **ไอคอนกราฟ** เพื่อดูรายละเอียด
4. ตรวจสอบทุกส่วนในหน้ารายละเอียด

**ผลลัพธ์ที่คาดหวัง:**
- [ ] การ์ดสรุปแสดง:
  - ต้นทุนการได้มาพร้อมวันที่
  - มูลค่าตามบัญชีปัจจุบันพร้อมเปอร์เซ็นต์
  - ค่าเสื่อมราคาสะสมพร้อมอายุการใช้งานที่เหลือ
  - ROI พร้อมกำไร/ขาดทุนสุทธิ
- [ ] กราฟมูลค่าสินทรัพย์โหลดถูกต้อง
- [ ] สลับระหว่างมุมมองประวัติและการคาดการณ์ทำงานได้
- [ ] แผงการตั้งค่าค่าเสื่อมราคาแสดงการกำหนดค่าที่ถูกต้อง
- [ ] ตารางประวัติค่าเสื่อมราคาแสดงรายการทั้งหมด

---

## กรณีทดสอบ 1.6: กรองสินทรัพย์ตามสถานะ

**วัตถุประสงค์:** ตรวจสอบว่าการกรองสถานะทำงานถูกต้องบนแดชบอร์ด

**ขั้นตอน:**
1. ไปที่ **การเงิน > แดชบอร์ดสินทรัพย์**
2. เลื่อนไปที่ส่วนรายการสินทรัพย์
3. คลิกที่แท็บตัวกรองสถานะแต่ละอัน:
   - **ทั้งหมด**
   - **ใช้งานอยู่**
   - **จำหน่ายแล้ว**
   - **ตัดจำหน่าย**

**ผลลัพธ์ที่คาดหวัง:**
- [ ] "ทั้งหมด" แสดงสินทรัพย์ทั้งหมดโดยไม่คำนึงถึงสถานะ
- [ ] "ใช้งานอยู่" แสดงเฉพาะสินทรัพย์ที่มีสถานะใช้งานอยู่
- [ ] "จำหน่ายแล้ว" แสดงเฉพาะสินทรัพย์ที่ขาย/จำหน่ายแล้ว
- [ ] "ตัดจำหน่าย" แสดงเฉพาะสินทรัพย์ที่ตัดจำหน่าย
- [ ] ป้ายจำนวนอัปเดตถูกต้องสำหรับแต่ละตัวกรอง
- [ ] แสดงข้อความสถานะว่างหากไม่มีสินทรัพย์ตรงกับตัวกรอง

---

## กรณีทดสอบ 1.7: ป้องกันสินทรัพย์ซ้ำสำหรับยานพาหนะเดียวกัน

**วัตถุประสงค์:** ตรวจสอบว่าระบบป้องกันการสร้างสินทรัพย์หลายรายการสำหรับยานพาหนะเดียวกัน

**ขั้นตอน:**
1. ไปที่ **การเงิน > แดชบอร์ดสินทรัพย์**
2. คลิก **"+ เพิ่มสินทรัพย์"**
3. ลองเลือกยานพาหนะที่มีบันทึกสินทรัพย์อยู่แล้ว

**ผลลัพธ์ที่คาดหวัง:**
- [ ] รายการยานพาหนะไม่แสดงยานพาหนะที่มีสินทรัพย์อยู่แล้ว
- หรือ
- [ ] แสดงข้อความข้อผิดพลาดหากเลือกยานพาหนะที่มีสินทรัพย์อยู่แล้ว
- [ ] ป้องกันการสร้างสินทรัพย์

---

## กรณีทดสอบ 1.8: สร้างสินทรัพย์ที่มีอยู่ก่อนหน้า

**วัตถุประสงค์:** ตรวจสอบการสร้างสินทรัพย์สำหรับยานพาหนะที่ได้มาก่อนการใช้งานระบบ

**ขั้นตอน:**
1. ไปที่ **การเงิน > แดชบอร์ดสินทรัพย์**
2. คลิก **"+ เพิ่มสินทรัพย์"**
3. ทำเครื่องหมาย **"ยานพาหนะที่มีอยู่ก่อน"**
4. ป้อน:
   - เลือกยานพาหนะ
   - วันที่ได้มาเดิม (ในอดีต เช่น 2 ปีก่อน)
   - ต้นทุนการได้มาเดิม: 80,000 บาท
   - มูลค่าตามบัญชีเริ่มต้น: 50,000 บาท (มูลค่าประมาณการปัจจุบัน)
   - วันที่เข้าระบบ: วันนี้
5. ตั้งค่าการคิดค่าเสื่อมราคา
6. คลิก **บันทึก**

**ผลลัพธ์ที่คาดหวัง:**
- [ ] สินทรัพย์ถูกสร้างพร้อมแฟล็กที่มีอยู่ก่อน
- [ ] มูลค่าตามบัญชีปัจจุบันเริ่มต้นที่มูลค่าตามบัญชีเริ่มต้น (50,000) ไม่ใช่ต้นทุนการได้มา
- [ ] ค่าเสื่อมราคาคำนวณจากวันที่เข้าระบบ ไม่ใช่วันที่ได้มา
- [ ] รายละเอียดสินทรัพย์แสดงทั้งมูลค่าเดิมและปัจจุบัน

---

## หมายเหตุ

- ค่าสกุลเงินทั้งหมดเป็นบาทไทย (THB)
- ควรจับภาพหน้าจอสำหรับการทดสอบที่ล้มเหลว
- รายงานพฤติกรรมที่ไม่คาดคิดหรือข้อความข้อผิดพลาด
