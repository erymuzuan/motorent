# การทดสอบกรณีพิเศษ

## หมวดหมู่การทดสอบ: กรณีพิเศษและสถานการณ์เฉพาะ

### ข้อกำหนดเบื้องต้น
- ผู้ใช้เข้าสู่ระบบในฐานะ OrgAdmin หรือ ShopManager
- มีสินทรัพย์หลายรายการในสถานะที่แตกต่างกัน
- มีสิทธิ์เข้าถึงเมนูการเงิน

---

## กรณีทดสอบ 6.1: ยานพาหนะที่มีอยู่ก่อนหน้าพร้อมมูลค่าตามบัญชีเริ่มต้น

**วัตถุประสงค์:** ตรวจสอบการจัดการยานพาหนะที่ได้มาก่อนการใช้งานระบบ

**ข้อมูลทดสอบ:**
- วันที่ได้มาเดิม: 2 ปีก่อน
- ต้นทุนการได้มาเดิม: 80,000 บาท
- มูลค่าตามบัญชีเริ่มต้น (ปัจจุบัน): 50,000 บาท
- วันที่เข้าระบบ: วันนี้

**ขั้นตอน:**
1. สร้างสินทรัพย์ใหม่โดยทำเครื่องหมาย "ยานพาหนะที่มีอยู่ก่อน"
2. ป้อนรายละเอียดการได้มาเดิม
3. ป้อนมูลค่าตามบัญชีปัจจุบัน (50,000)
4. บันทึกและดูสินทรัพย์

**ผลลัพธ์ที่คาดหวัง:**
- [ ] สินทรัพย์แสดงทั้งต้นทุนเดิมและมูลค่าตามบัญชีเริ่มต้น
- [ ] มูลค่าตามบัญชีปัจจุบันเริ่มที่ 50,000 (ไม่ใช่ 80,000)
- [ ] ค่าเสื่อมราคาคำนวณจากวันที่เข้าระบบ
- [ ] แฟล็กที่มีอยู่ก่อนปรากฏในรายละเอียดสินทรัพย์
- [ ] ค่าเสื่อมราคาสะสมแสดง 0 ตอนเริ่มต้น (แม้ว่าจะสูญเสียไป 30,000 แล้ว)

---

## กรณีทดสอบ 6.2: การเช่าครั้งแรกกระตุ้น Day Out of Door

**วัตถุประสงค์:** ตรวจสอบว่าค่าเสื่อมราคา Day Out of Door กระตุ้นอย่างถูกต้องเมื่อเช่าครั้งแรก

**ข้อมูลทดสอบ:**
- สินทรัพย์ที่ใช้วิธี Day Out of Door
- Day Out of Door %: 20%
- ต้นทุนการได้มา: 50,000 บาท

**ขั้นตอน:**
1. สร้างสินทรัพย์ด้วยวิธีค่าเสื่อมราคา Day Out of Door
2. ตรวจสอบว่าสินทรัพย์ไม่มีวันเช่าครั้งแรก
3. สร้างและดำเนินการเช่าให้เสร็จสำหรับยานพาหนะที่เกี่ยวข้อง
4. ตรวจสอบประวัติค่าเสื่อมราคาของสินทรัพย์

**ผลลัพธ์ที่คาดหวัง:**
- [ ] ก่อนเช่า: มูลค่าตามบัญชี = 50,000, ไม่มีรายการค่าเสื่อมราคา
- [ ] หลังเช่า: รายการค่าเสื่อมราคา 10,000 บาทถูกสร้าง
- [ ] มูลค่าตามบัญชีเป็น 40,000 บาท
- [ ] ประเภทรายการแสดง "Day Out of Door"
- [ ] วันเช่าครั้งแรกถูกบันทึกในสินทรัพย์
- [ ] การเช่าครั้งต่อไปไม่กระตุ้น Day Out of Door เพิ่มเติม

---

## กรณีทดสอบ 6.3: การป้องกันค่าเสื่อมราคาต่ำกว่ามูลค่าซาก

**วัตถุประสงค์:** ตรวจสอบว่าค่าเสื่อมราคาหยุดที่มูลค่าซาก

**ข้อมูลทดสอบ:**
- มูลค่าตามบัญชีปัจจุบัน: 5,500 บาท
- มูลค่าซาก: 5,000 บาท
- ค่าเสื่อมราคารายเดือน (ปกติ): 750 บาท

**ขั้นตอน:**
1. พยายามบันทึกค่าเสื่อมราคารายเดือน
2. ตรวจสอบจำนวนที่คำนวณ

**ผลลัพธ์ที่คาดหวัง:**
- [ ] ระบบคำนวณเพียง 500 บาท (ส่วนต่างถึงมูลค่าซาก)
- [ ] ไม่สามารถเสื่อมราคาต่ำกว่า 5,000 บาท
- [ ] แสดงข้อความเตือนเกี่ยวกับการถึงมูลค่าซาก
- [ ] หลังบันทึก มูลค่าตามบัญชี = 5,000 บาทพอดี

---

## กรณีทดสอบ 6.4: สินทรัพย์ที่เสื่อมราคาครบแล้ว

**วัตถุประสงค์:** ตรวจสอบพฤติกรรมเมื่อสินทรัพย์ถึงค่าเสื่อมราคาเต็ม

**ขั้นตอน:**
1. ค้นหา/สร้างสินทรัพย์ที่มูลค่าซาก (เสื่อมราคาครบแล้ว)
2. พยายามบันทึกค่าเสื่อมราคาเพิ่ม
3. ตรวจสอบสถานะสินทรัพย์และตัวเลือก

**ผลลัพธ์ที่คาดหวัง:**
- [ ] จำนวนค่าเสื่อมราคาแสดง 0 หรือ "เสื่อมราคาครบแล้ว"
- [ ] ไม่สามารถบันทึกค่าเสื่อมราคาเพิ่มเติม
- [ ] สินทรัพย์ยังคงทำงาน (ติดตามค่าใช้จ่าย รายได้ได้)
- [ ] แดชบอร์ดแสดงสินทรัพย์ถูกต้อง
- [ ] การคำนวณ ROI ยังคงทำงาน

---

## กรณีทดสอบ 6.5: การชำระสินเชื่อ - งวดสุดท้าย

**วัตถุประสงค์:** ตรวจสอบกระบวนการชำระสินเชื่อครบ

**ขั้นตอน:**
1. มีสินเชื่อที่เหลืออีก 1 งวด
2. บันทึกงวดสุดท้าย
3. ตรวจสอบสถานะสินเชื่อ

**ผลลัพธ์ที่คาดหวัง:**
- [ ] งวดสุดท้ายถูกบันทึกสำเร็จ
- [ ] สถานะสินเชื่อเปลี่ยนเป็น "ชำระครบ"
- [ ] ยอดคงเหลือ = 0
- [ ] ไม่มีงวดที่ครบกำหนดเพิ่มเติม
- [ ] การอ้างอิงสินเชื่อของสินทรัพย์อัปเดต/ล้าง

---

## กรณีทดสอบ 6.6: การจำหน่ายสินทรัพย์พร้อมกำไร

**วัตถุประสงค์:** ตรวจสอบการจำหน่ายเมื่อขายเกินมูลค่าตามบัญชี

**ข้อมูลทดสอบ:**
- มูลค่าตามบัญชีปัจจุบัน: 30,000 บาท
- ราคาขาย: 35,000 บาท
- กำไรที่คาดหวัง: 5,000 บาท

**ขั้นตอน:**
1. ไปที่สินทรัพย์
2. คลิก "จำหน่ายสินทรัพย์"
3. ป้อนวันที่จำหน่ายและราคาขาย (35,000)
4. ยืนยันการจำหน่าย

**ผลลัพธ์ที่คาดหวัง:**
- [ ] กำไร/ขาดทุนคำนวณเป็น +5,000 บาท
- [ ] สถานะสินทรัพย์เปลี่ยนเป็น "จำหน่ายแล้ว"
- [ ] วันที่จำหน่ายถูกบันทึก
- [ ] กำไรปรากฏในกิจกรรม/รายงาน
- [ ] สินทรัพย์ไม่อยู่ในรายการใช้งานอยู่

---

## กรณีทดสอบ 6.7: การจำหน่ายสินทรัพย์พร้อมขาดทุน

**วัตถุประสงค์:** ตรวจสอบการจำหน่ายเมื่อขายต่ำกว่ามูลค่าตามบัญชี

**ข้อมูลทดสอบ:**
- มูลค่าตามบัญชีปัจจุบัน: 30,000 บาท
- ราคาขาย: 22,000 บาท
- ขาดทุนที่คาดหวัง: 8,000 บาท

**ขั้นตอน:**
1. ไปที่สินทรัพย์
2. คลิก "จำหน่ายสินทรัพย์"
3. ป้อนวันที่จำหน่ายและราคาขาย (22,000)
4. ยืนยันการจำหน่าย

**ผลลัพธ์ที่คาดหวัง:**
- [ ] กำไร/ขาดทุนคำนวณเป็น -8,000 บาท (ขาดทุน)
- [ ] ขาดทุนแสดงสีแดงหรือรูปแบบติดลบ
- [ ] สถานะสินทรัพย์เปลี่ยนเป็น "จำหน่ายแล้ว"
- [ ] ขาดทุนส่งผลต่อรายงานผลกำไร

---

## กรณีทดสอบ 6.8: ตัดจำหน่ายสินทรัพย์ (สูญเสียทั้งหมด)

**วัตถุประสงค์:** ตรวจสอบการตัดจำหน่ายสำหรับการถูกขโมยหรือสูญเสียทั้งหมด

**ข้อมูลทดสอบ:**
- มูลค่าตามบัญชีปัจจุบัน: 40,000 บาท

**ขั้นตอน:**
1. ไปที่สินทรัพย์
2. คลิก "ตัดจำหน่ายสินทรัพย์"
3. ป้อนเหตุผล: "ถูกขโมย - รายงานตำรวจ #12345"
4. ยืนยันการตัดจำหน่าย

**ผลลัพธ์ที่คาดหวัง:**
- [ ] สถานะสินทรัพย์เปลี่ยนเป็น "ตัดจำหน่าย"
- [ ] มูลค่าตามบัญชีทั้งหมดบันทึกเป็นขาดทุน (40,000)
- [ ] เหตุผลถูกบันทึกในระบบ
- [ ] สินทรัพย์ถูกลบจากการดำเนินงานที่ใช้งานอยู่
- [ ] ขาดทุนสะท้อนในรายงาน

---

## กรณีทดสอบ 6.9: การแสดง ROI ติดลบ

**วัตถุประสงค์:** ตรวจสอบการแสดง ROI ติดลบอย่างถูกต้อง

**การตั้งค่าทดสอบ:**
- สินทรัพย์ที่มีค่าใช้จ่ายสูงและรายได้ต่ำส่งผลให้ ROI ติดลบ

**ขั้นตอน:**
1. ดูสินทรัพย์ที่มี ROI ติดลบ
2. ตรวจสอบแดชบอร์ดและรายงาน

**ผลลัพธ์ที่คาดหวัง:**
- [ ] ROI ติดลบแสดงพร้อมเครื่องหมายลบ
- [ ] มีสีแดงหรือสีเตือน
- [ ] ปรากฏในการแจ้งเตือน "ผลงานต่ำ"
- [ ] รายงานผลกำไรแสดงถูกต้อง
- [ ] การเรียงลำดับจัดวาง ROI ติดลบอย่างเหมาะสม

---

## กรณีทดสอบ 6.10: สินทรัพย์ที่ไม่มีรายได้

**วัตถุประสงค์:** ตรวจสอบการจัดการสินทรัพย์ที่ไม่มีรายได้จากการเช่า

**ขั้นตอน:**
1. ดูสินทรัพย์ที่ไม่เคยถูกเช่า
2. ตรวจสอบ ROI และการคำนวณผลกำไร

**ผลลัพธ์ที่คาดหวัง:**
- [ ] รายได้แสดง 0 หรือ "-"
- [ ] การคำนวณ ROI จัดการรายได้เป็นศูนย์
- [ ] ไม่มีข้อผิดพลาดหารด้วยศูนย์
- [ ] สินทรัพย์ยังคงปรากฏในรายงาน
- [ ] ค่าใช้จ่ายและค่าเสื่อมราคาถูกติดตามตามปกติ

---

## กรณีทดสอบ 6.11: การเปลี่ยนวิธีค่าเสื่อมราคาหลายครั้ง

**วัตถุประสงค์:** ตรวจสอบการเปลี่ยนวิธีค่าเสื่อมราคาระหว่างอายุการใช้งาน

**ขั้นตอน:**
1. สร้างสินทรัพย์ด้วยวิธีเส้นตรง
2. บันทึกค่าเสื่อมราคาหลายเดือน
3. แก้ไขสินทรัพย์และเปลี่ยนเป็นยอดลดลง
4. บันทึกค่าเสื่อมราคาใหม่

**ผลลัพธ์ที่คาดหวัง:**
- [ ] รายการก่อนหน้ายังคงไม่เปลี่ยนแปลง (จำนวนเส้นตรง)
- [ ] รายการใหม่ใช้การคำนวณยอดลดลง
- [ ] ประวัติแสดงทั้งสองวิธี
- [ ] ค่าเสื่อมราคาสะสมรวมเป็นผลรวมของทุกรายการ

---

## กรณีทดสอบ 6.12: อายุการใช้งานยาวมาก

**วัตถุประสงค์:** ตรวจสอบการจัดการช่วงอายุการใช้งานที่ยาวนาน

**ข้อมูลทดสอบ:**
- อายุการใช้งาน: 120 เดือน (10 ปี)
- ต้นทุนการได้มา: 100,000 บาท
- มูลค่าซาก: 10,000 บาท

**ขั้นตอน:**
1. สร้างสินทรัพย์ด้วยอายุการใช้งาน 120 เดือน
2. ดูการคาดการณ์ค่าเสื่อมราคา
3. บันทึกค่าเสื่อมราคา

**ผลลัพธ์ที่คาดหวัง:**
- [ ] ค่าเสื่อมราคารายเดือน = 750 บาท
- [ ] กราฟการคาดการณ์ขยาย 10 ปี
- [ ] ระบบจัดการช่วงเวลายาวโดยไม่มีปัญหา
- [ ] UI แสดงเดือนและปีอย่างชัดเจน

---

## กรณีทดสอบ 6.13: อายุการใช้งานสั้นมาก

**วัตถุประสงค์:** ตรวจสอบการจัดการอายุการใช้งานสั้น (ค่าเสื่อมราคาเร็ว)

**ข้อมูลทดสอบ:**
- อายุการใช้งาน: 12 เดือน
- ต้นทุนการได้มา: 30,000 บาท
- มูลค่าซาก: 5,000 บาท

**ขั้นตอน:**
1. สร้างสินทรัพย์ด้วยอายุการใช้งาน 12 เดือน
2. ดูจำนวนค่าเสื่อมราคารายเดือน
3. บันทึกค่าเสื่อมราคา

**ผลลัพธ์ที่คาดหวัง:**
- [ ] ค่าเสื่อมราคารายเดือน = 2,083 บาท
- [ ] เสื่อมราคาครบภายใน 12 เดือน
- [ ] ระบบจัดการค่าเสื่อมราคาเร็ว
- [ ] การคาดการณ์แสดงวันที่สิ้นสุดที่ถูกต้อง

---

## กรณีทดสอบ 6.14: สกุลเงินและตัวเลขขนาดใหญ่

**วัตถุประสงค์:** ตรวจสอบการแสดงค่าสกุลเงินขนาดใหญ่

**ข้อมูลทดสอบ:**
- สินทรัพย์ที่มีต้นทุนการได้มา: 1,500,000 บาท (1.5 ล้าน)

**ขั้นตอน:**
1. สร้างสินทรัพย์มูลค่าสูง
2. ดูในแดชบอร์ดและรายงาน
3. ตรวจสอบการจัดรูปแบบตัวเลข

**ผลลัพธ์ที่คาดหวัง:**
- [ ] ตัวเลขแสดงพร้อมตัวคั่นหลักพัน (1,500,000)
- [ ] ไม่มีการล้นหรือตัดทอน
- [ ] กราฟปรับสเกลอย่างเหมาะสม
- [ ] ยอดรวมคำนวณถูกต้อง

---

## กรณีทดสอบ 6.15: การดำเนินการพร้อมกันของผู้ใช้

**วัตถุประสงค์:** ตรวจสอบว่าระบบจัดการการแก้ไขพร้อมกันอย่างเหมาะสม

**ขั้นตอน:**
1. เปิดสินทรัพย์เดียวกันในสองหน้าต่างเบราว์เซอร์
2. แก้ไขฟิลด์ที่แตกต่างกันในแต่ละหน้าต่าง
3. บันทึกทั้งสอง

**ผลลัพธ์ที่คาดหวัง:**
- [ ] การบันทึกแรกสำเร็จ
- [ ] การบันทึกที่สองอย่างใดอย่างหนึ่ง:
  - เตือนเกี่ยวกับการแก้ไขพร้อมกัน
  - รวมการเปลี่ยนแปลงถูกต้อง
  - แสดงการแก้ไขขัดแย้ง
- [ ] ไม่มีข้อมูลเสียหาย

---

## หมายเหตุ

- บันทึกพฤติกรรมที่ไม่คาดคิด
- ทดสอบเงื่อนไขขอบเขตอย่างระมัดระวัง
- ตรวจสอบว่าเส้นทางการตรวจสอบจับการดำเนินการพิเศษ
- ตรวจสอบข้อความข้อผิดพลาดที่เหมาะสม
