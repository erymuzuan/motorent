# การทดสอบสินเชื่อ

## หมวดหมู่การทดสอบ: การจัดการสินเชื่อ

### ข้อกำหนดเบื้องต้น
- ผู้ใช้เข้าสู่ระบบในฐานะ OrgAdmin หรือ ShopManager
- มีสินทรัพย์อย่างน้อยหนึ่งรายการ (ควรสร้างใหม่)
- มีสิทธิ์เข้าถึงเมนูการเงิน

---

## กรณีทดสอบ 4.1: สร้างสินเชื่อใหม่สำหรับสินทรัพย์

**วัตถุประสงค์:** ตรวจสอบการสร้างบันทึกสินเชื่อสำหรับยานพาหนะที่ผ่อนชำระ

**ข้อมูลทดสอบ:**
- เงินต้น: 100,000 บาท
- อัตราดอกเบี้ยรายปี: 8% (0.08)
- ระยะเวลา: 24 เดือน
- เงินดาวน์: 20,000 บาท
- ค่างวดรายเดือนที่คาดหวัง: ~4,523 บาท

**ขั้นตอน:**
1. ไปที่ **การเงิน > สินเชื่อ**
2. คลิก **"+ เพิ่มสินเชื่อ"**
3. กรอกรายละเอียดสินเชื่อ:
   - เลือกสินทรัพย์: [เลือกยานพาหนะ]
   - ชื่อผู้ให้กู้: "ธนาคารกรุงเทพ"
   - เงินต้น: 100,000 บาท
   - อัตราดอกเบี้ยรายปี: 8%
   - ระยะเวลา: 24 เดือน
   - เงินดาวน์: 20,000 บาท
   - วันที่เริ่มต้น: วันแรกของเดือนปัจจุบัน
4. คลิก **บันทึก**

**ผลลัพธ์ที่คาดหวัง:**
- [ ] สินเชื่อถูกสร้างสำเร็จ
- [ ] ค่างวดรายเดือนคำนวณอัตโนมัติ
- [ ] ตารางผ่อนชำระถูกสร้าง
- [ ] สินเชื่อเชื่อมโยงกับสินทรัพย์
- [ ] สินทรัพย์แสดงการอ้างอิงสินเชื่อ

---

## กรณีทดสอบ 4.2: ดูรายละเอียดสินเชื่อและตารางผ่อนชำระ

**วัตถุประสงค์:** ตรวจสอบหน้ารายละเอียดสินเชื่อและตารางผ่อนชำระ

**ขั้นตอน:**
1. ไปที่ **การเงิน > สินเชื่อ**
2. คลิกที่สินเชื่อเพื่อดูรายละเอียด
3. ตรวจสอบแท็บตารางการชำระ

**ผลลัพธ์ที่คาดหวัง:**
- [ ] สรุปสินเชื่อแสดง:
  - เงินต้น
  - อัตราดอกเบี้ย
  - ค่างวดรายเดือน
  - ดอกเบี้ยรวมตลอดอายุสัญญา
  - ยอดคงเหลือ
- [ ] ตารางผ่อนชำระแสดง:
  - หมายเลขงวด
  - วันครบกำหนด
  - ค่างวดรวม
  - ส่วนเงินต้น
  - ส่วนดอกเบี้ย
  - ยอดคงเหลือ
- [ ] แสดงรายการทั้ง 24 งวด (สำหรับระยะเวลา 24 เดือน)

---

## กรณีทดสอบ 4.3: บันทึกการชำระค่างวด

**วัตถุประสงค์:** ตรวจสอบการบันทึกการชำระค่างวดรายเดือน

**ขั้นตอน:**
1. ไปที่ **การเงิน > สินเชื่อ > [เลือกสินเชื่อ]**
2. ดูตารางการชำระ
3. ค้นหางวดที่ครบกำหนดปัจจุบัน
4. คลิก **"บันทึกการชำระ"**
5. ป้อน:
   - วันที่ชำระ: วันนี้
   - อ้างอิง: "TXN-2025-001"
6. คลิก **ยืนยัน**

**ผลลัพธ์ที่คาดหวัง:**
- [ ] งวดถูกทำเครื่องหมาย "ชำระแล้ว"
- [ ] เงินต้นคงเหลืออัปเดต
- [ ] ส่วนดอกเบี้ยสร้างรายการค่าใช้จ่ายอัตโนมัติ
- [ ] งวดถัดไปถูกไฮไลท์เป็นงวดที่ครบกำหนด
- [ ] ประวัติการชำระแสดงรายการที่บันทึก

---

## กรณีทดสอบ 4.4: ดูยอดสินเชื่อคงเหลือ

**วัตถุประสงค์:** ตรวจสอบการคำนวณยอดคงเหลือหลังการชำระ

**ขั้นตอน:**
1. บันทึกการชำระ 3 งวดติดต่อกัน
2. ไปที่ **การเงิน > สินเชื่อ > [เลือกสินเชื่อ]**
3. ตรวจสอบยอดคงเหลือ

**ผลลัพธ์ที่คาดหวัง:**
- [ ] ยอดคงเหลือ = เงินต้น - ผลรวมของส่วนเงินต้นที่ชำระ
- [ ] จำนวนงวดคงเหลือลดลง
- [ ] ตัวบ่งชี้ความคืบหน้าแสดงความคืบหน้าในการชำระ

---

## กรณีทดสอบ 4.5: การแจ้งเตือนงวดค้างชำระ

**วัตถุประสงค์:** ตรวจสอบว่าระบบระบุงวดสินเชื่อที่ค้างชำระ

**การตั้งค่าทดสอบ:**
- มีสินเชื่อที่มีงวดที่ยังไม่ชำระเกินวันครบกำหนด

**ขั้นตอน:**
1. ไปที่ **การเงิน > แดชบอร์ดสินทรัพย์**
2. ตรวจสอบส่วน "ต้องการความสนใจ"
3. ค้นหาการแจ้งเตือนงวดค้างชำระ

**ผลลัพธ์ที่คาดหวัง:**
- [ ] การแจ้งเตือนแสดง "X งวดค้างชำระ"
- [ ] คลิกการแจ้งเตือนไปยังรายการสินเชื่อพร้อมตัวกรองค้างชำระ
- [ ] งวดค้างชำระไฮไลท์สีแดงหรือสีเตือน
- [ ] สถานะล่าช้าแสดงในตารางการชำระ

---

## กรณีทดสอบ 4.6: การแจ้งเตือนงวดที่จะครบกำหนด

**วัตถุประสงค์:** ตรวจสอบการแจ้งเตือนงวดที่จะครบกำหนด

**การตั้งค่าทดสอบ:**
- มีสินเชื่อที่มีงวดครบกำหนดภายใน 7 วันข้างหน้า

**ขั้นตอน:**
1. ไปที่ **การเงิน > แดชบอร์ดสินทรัพย์**
2. ตรวจสอบส่วน "ต้องการความสนใจ"

**ผลลัพธ์ที่คาดหวัง:**
- [ ] การแจ้งเตือนแสดง "X งวดครบกำหนดสัปดาห์นี้"
- [ ] คลิกไปยังมุมมองงวดที่จะครบกำหนด
- [ ] แสดงวันครบกำหนดอย่างชัดเจน

---

## กรณีทดสอบ 4.7: การสร้างค่าใช้จ่ายดอกเบี้ยอัตโนมัติ

**วัตถุประสงค์:** ตรวจสอบว่าส่วนดอกเบี้ยสร้างรายการค่าใช้จ่ายอัตโนมัติ

**ขั้นตอน:**
1. บันทึกการชำระค่างวด
2. ไปที่ **การเงิน > ค่าใช้จ่าย**
3. กรองตามหมวดหมู่: **การเงิน**

**ผลลัพธ์ที่คาดหวัง:**
- [ ] รายการค่าใช้จ่ายถูกสร้างสำหรับส่วนดอกเบี้ย
- [ ] หมวดหมู่คือ "การเงิน"
- [ ] จำนวนตรงกับส่วนดอกเบี้ยจากการชำระ
- [ ] เชื่อมโยงกับสินทรัพย์ที่ถูกต้อง
- [ ] รายละเอียดระบุการชำระดอกเบี้ยสินเชื่อ

---

## กรณีทดสอบ 4.8: การชำระสินเชื่อครบ

**วัตถุประสงค์:** ตรวจสอบการชำระสินเชื่อครบทุกงวด

**การตั้งค่าทดสอบ:**
- มีสินเชื่อที่เหลือเพียง 1-2 งวด

**ขั้นตอน:**
1. บันทึกงวดที่เหลือทั้งหมด
2. ดูสถานะสินเชื่อหลังจากชำระงวดสุดท้าย

**ผลลัพธ์ที่คาดหวัง:**
- [ ] สถานะสินเชื่อเปลี่ยนเป็น "ชำระครบ"
- [ ] ยอดคงเหลือแสดง 0
- [ ] ทุกงวดถูกทำเครื่องหมายชำระแล้ว
- [ ] งวดสุดท้ายชำระสำเร็จ
- [ ] สินทรัพย์ไม่แสดงสินเชื่อที่ใช้งานอยู่

---

## กรณีทดสอบ 4.9: การชำระสินเชื่อก่อนกำหนด

**วัตถุประสงค์:** ตรวจสอบการบันทึกการชำระปิดบัญชีก่อนกำหนด

**ขั้นตอน:**
1. ไปที่ **การเงิน > สินเชื่อ > [เลือกสินเชื่อ]**
2. คลิก **"ชำระก่อนกำหนด"** หรือ **"ปิดบัญชีสินเชื่อ"**
3. ป้อนจำนวนปิดบัญชี (เงินต้นคงเหลือ)
4. ยืนยันการปิดบัญชี

**ผลลัพธ์ที่คาดหวัง:**
- [ ] จำนวนปิดบัญชีคำนวณถูกต้อง
- [ ] งวดที่เหลือถูกยกเลิก
- [ ] สินเชื่อถูกทำเครื่องหมาย "ชำระครบ"
- [ ] แสดงเงินดอกเบี้ยที่ประหยัดได้ (ถ้ามี)

---

## กรณีทดสอบ 4.10: ดูสินเชื่อตามสถานะ

**วัตถุประสงค์:** ตรวจสอบการกรองสินเชื่อตามสถานะ

**ขั้นตอน:**
1. ไปที่ **การเงิน > สินเชื่อ**
2. ใช้ตัวกรองสถานะ:
   - **ทั้งหมด**
   - **ใช้งานอยู่**
   - **ชำระครบ**
   - **ค้างชำระ** (ถ้ามี)

**ผลลัพธ์ที่คาดหวัง:**
- [ ] ใช้งานอยู่แสดงสินเชื่อที่กำลังดำเนินการ
- [ ] ชำระครบแสดงสินเชื่อที่เสร็จสิ้น
- [ ] จำนวนตรงกับผลลัพธ์ตัวกรอง

---

## กรณีทดสอบ 4.11: แก้ไขรายละเอียดสินเชื่อ

**วัตถุประสงค์:** ตรวจสอบการแก้ไขข้อมูลสินเชื่อ (ฟิลด์จำกัด)

**ขั้นตอน:**
1. ไปที่ **การเงิน > สินเชื่อ > [เลือกสินเชื่อ]**
2. คลิก **แก้ไข**
3. แก้ไขฟิลด์ที่อนุญาต:
   - ชื่อผู้ให้กู้
   - หมายเลขบัญชี/อ้างอิง
4. คลิก **บันทึก**

**ผลลัพธ์ที่คาดหวัง:**
- [ ] บันทึกการเปลี่ยนแปลง
- [ ] เงินต้น อัตรา ระยะเวลา ไม่ควรแก้ไขได้ (หลังสร้าง)
- [ ] คำเตือนถ้าพยายามแก้ไขฟิลด์ที่ล็อค

---

## กรณีทดสอบ 4.12: ผลกระทบของสินเชื่อต่อรายงานผลกำไร

**วัตถุประสงค์:** ตรวจสอบว่าต้นทุนสินเชื่อสะท้อนในรายงานผลกำไร

**ขั้นตอน:**
1. บันทึกการชำระค่างวดหลายงวดสำหรับสินทรัพย์
2. ไปที่ **การเงิน > รายงาน > ผลกำไร**
3. ดูสรุปการเงินของสินทรัพย์

**ผลลัพธ์ที่คาดหวัง:**
- [ ] ค่าใช้จ่ายดอกเบี้ยรวมอยู่ในค่าใช้จ่ายรวม
- [ ] การคำนวณ ROI รวมต้นทุนการเงิน
- [ ] รายละเอียดค่าใช้จ่ายแสดงหมวดหมู่การเงิน

---

## หมายเหตุ

- การคำนวณดอกเบี้ยควรใช้สูตรผ่อนชำระมาตรฐาน
- ค่างวดรายเดือน = P × [r(1+r)^n] / [(1+r)^n - 1]
- ตรวจสอบการคำนวณตรงกับมาตรฐานธนาคาร/การเงิน
- ทดสอบด้วยอัตราดอกเบี้ยและระยะเวลาที่แตกต่างกัน
