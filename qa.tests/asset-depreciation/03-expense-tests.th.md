# การทดสอบค่าใช้จ่าย

## หมวดหมู่การทดสอบ: การติดตามค่าใช้จ่าย

### ข้อกำหนดเบื้องต้น
- ผู้ใช้เข้าสู่ระบบในฐานะ OrgAdmin หรือ ShopManager
- มีสินทรัพย์ที่ใช้งานอยู่อย่างน้อยหนึ่งรายการ
- มีสิทธิ์เข้าถึงเมนูการเงิน

---

## กรณีทดสอบ 3.1: บันทึกค่าใช้จ่ายการบำรุงรักษา

**วัตถุประสงค์:** ตรวจสอบการบันทึกค่าใช้จ่ายการบำรุงรักษาสำหรับสินทรัพย์

**ขั้นตอน:**
1. ไปที่ **การเงิน > ค่าใช้จ่าย**
2. คลิก **"+ เพิ่มค่าใช้จ่าย"**
3. กรอกรายละเอียดค่าใช้จ่าย:
   - เลือกสินทรัพย์: [เลือกยานพาหนะ]
   - หมวดหมู่: **การบำรุงรักษา**
   - จำนวน: 2,500 บาท
   - วันที่: วันนี้
   - รายละเอียด: "เปลี่ยนน้ำมันเครื่องและไส้กรอง"
   - ผู้ขาย: "Phuket Honda Service"
   - อ้างอิง: "SVC-2025-001"
4. คลิก **บันทึก**

**ผลลัพธ์ที่คาดหวัง:**
- [ ] ค่าใช้จ่ายถูกสร้างสำเร็จ
- [ ] ค่าใช้จ่ายปรากฏในรายการค่าใช้จ่าย
- [ ] ค่าใช้จ่ายรวมของสินทรัพย์เพิ่มขึ้น 2,500 บาท
- [ ] ค่าใช้จ่ายแสดงภายใต้หมวดหมู่การบำรุงรักษา

---

## กรณีทดสอบ 3.2: บันทึกค่าใช้จ่ายประกันภัย

**วัตถุประสงค์:** ตรวจสอบการบันทึกค่าใช้จ่ายประกันภัย

**ขั้นตอน:**
1. ไปที่ **การเงิน > ค่าใช้จ่าย**
2. คลิก **"+ เพิ่มค่าใช้จ่าย"**
3. กรอก:
   - สินทรัพย์: [เลือกยานพาหนะ]
   - หมวดหมู่: **ประกันภัย**
   - จำนวน: 8,000 บาท
   - วันที่: วันเริ่มต้นกรมธรรม์
   - รายละเอียด: "ประกันภัยชั้น 1 รายปี"
   - ผู้ขาย: "Thai Insurance Co."
   - อ้างอิง: "POL-2025-12345"
   - ทำเครื่องหมาย **"หักภาษีได้"**
4. คลิก **บันทึก**

**ผลลัพธ์ที่คาดหวัง:**
- [ ] ค่าใช้จ่ายประกันภัยถูกบันทึก
- [ ] แฟล็กหักภาษีได้ถูกบันทึก
- [ ] ปรากฏภายใต้หมวดหมู่ประกันภัยในรายงาน
- [ ] ค่าใช้จ่ายรวมของสินทรัพย์อัปเดต

---

## กรณีทดสอบ 3.3: บันทึกค่าใช้จ่ายอุบัติเหตุ

**วัตถุประสงค์:** ตรวจสอบการบันทึกค่าซ่อมจากอุบัติเหตุ

**ขั้นตอน:**
1. ไปที่ **การเงิน > ค่าใช้จ่าย**
2. คลิก **"+ เพิ่มค่าใช้จ่าย"**
3. กรอก:
   - สินทรัพย์: [เลือกยานพาหนะ]
   - หมวดหมู่: **อุบัติเหตุ**
   - จำนวน: 15,000 บาท
   - วันที่: วันที่ซ่อมเสร็จ
   - รายละเอียด: "เปลี่ยนแฟริ่งหน้าและกระจกมองข้าง - ชนเบาๆ"
   - ผู้ขาย: "Body Shop Plus"
   - อ้างอิง: "ACC-RPR-001"
4. คลิก **บันทึก**

**ผลลัพธ์ที่คาดหวัง:**
- [ ] ค่าใช้จ่ายอุบัติเหตุถูกบันทึก
- [ ] แสดงในหมวดหมู่อุบัติเหตุ
- [ ] ผลกระทบที่สำคัญปรากฏในรายงานผลกำไร

---

## กรณีทดสอบ 3.4: บันทึกค่าใช้จ่ายทะเบียน

**วัตถุประสงค์:** ตรวจสอบการบันทึกค่าธรรมเนียมทะเบียนประจำปี

**ขั้นตอน:**
1. ไปที่ **การเงิน > ค่าใช้จ่าย**
2. คลิก **"+ เพิ่มค่าใช้จ่าย"**
3. กรอก:
   - สินทรัพย์: [เลือกยานพาหนะ]
   - หมวดหมู่: **ทะเบียน**
   - จำนวน: 500 บาท
   - วันที่: วันที่จดทะเบียน
   - รายละเอียด: "ต่อทะเบียนประจำปี 2025"
   - ผู้ขาย: "กรมการขนส่งทางบก ภูเก็ต"
   - อ้างอิง: "REG-2025"
4. คลิก **บันทึก**

**ผลลัพธ์ที่คาดหวัง:**
- [ ] ค่าใช้จ่ายทะเบียนถูกบันทึก
- [ ] จัดหมวดหมู่ถูกต้อง

---

## กรณีทดสอบ 3.5: บันทึกค่าใช้จ่ายวัสดุสิ้นเปลือง

**วัตถุประสงค์:** ตรวจสอบการบันทึกค่าใช้จ่ายวัสดุสิ้นเปลือง

**ขั้นตอน:**
1. ไปที่ **การเงิน > ค่าใช้จ่าย**
2. คลิก **"+ เพิ่มค่าใช้จ่าย"**
3. กรอก:
   - สินทรัพย์: [เลือกยานพาหนะ]
   - หมวดหมู่: **วัสดุสิ้นเปลือง**
   - จำนวน: 350 บาท
   - รายละเอียด: "น้ำมันสำหรับขนย้ายไปสาขา"
4. คลิก **บันทึก**

**ผลลัพธ์ที่คาดหวัง:**
- [ ] ค่าใช้จ่ายวัสดุสิ้นเปลืองถูกบันทึก
- [ ] การติดตามจำนวนเล็กน้อยทำงานถูกต้อง

---

## กรณีทดสอบ 3.6: ดูค่าใช้จ่ายตามสินทรัพย์

**วัตถุประสงค์:** ตรวจสอบการดูค่าใช้จ่ายทั้งหมดสำหรับสินทรัพย์เฉพาะ

**ขั้นตอน:**
1. ไปที่ **การเงิน > สินทรัพย์ > [เลือกสินทรัพย์ที่มีค่าใช้จ่าย]**
2. คลิกเพื่อดูรายละเอียดสินทรัพย์
3. ค้นหาส่วน/แท็บค่าใช้จ่าย

**ผลลัพธ์ที่คาดหวัง:**
- [ ] ค่าใช้จ่ายทั้งหมดสำหรับสินทรัพย์นี้แสดงในรายการ
- [ ] รายละเอียดตามหมวดหมู่ปรากฏ
- [ ] ค่าใช้จ่ายรวมตรงกับสรุป
- [ ] ตัวเลือกกรอง/เรียงลำดับทำงาน

---

## กรณีทดสอบ 3.7: รายละเอียดหมวดหมู่ค่าใช้จ่ายบนแดชบอร์ด

**วัตถุประสงค์:** ตรวจสอบแผนภูมิรายละเอียดค่าใช้จ่ายบนแดชบอร์ดสินทรัพย์

**ขั้นตอน:**
1. ไปที่ **การเงิน > แดชบอร์ดสินทรัพย์**
2. ค้นหาแผนภูมิโดนัท "รายละเอียดค่าใช้จ่าย"

**ผลลัพธ์ที่คาดหวัง:**
- [ ] แผนภูมิโดนัทแสดง
- [ ] หมวดหมู่ค่าใช้จ่ายทั้งหมดแสดง
- [ ] เปอร์เซ็นต์รวมเป็น 100%
- [ ] คำอธิบายแสดง:
  - ชื่อหมวดหมู่
  - จำนวน
  - เปอร์เซ็นต์
- [ ] ยอดรวมแสดงด้านล่าง

---

## กรณีทดสอบ 3.8: แก้ไขค่าใช้จ่ายที่มีอยู่

**วัตถุประสงค์:** ตรวจสอบการแก้ไขบันทึกค่าใช้จ่ายที่มีอยู่

**ขั้นตอน:**
1. ไปที่ **การเงิน > ค่าใช้จ่าย**
2. ค้นหาค่าใช้จ่ายที่มีอยู่
3. คลิกปุ่ม **แก้ไข**
4. แก้ไข:
   - จำนวน (เปลี่ยนจาก 2,500 เป็น 2,800)
   - รายละเอียด (เพิ่มรายละเอียดเพิ่มเติม)
5. คลิก **บันทึก**

**ผลลัพธ์ที่คาดหวัง:**
- [ ] บันทึกการเปลี่ยนแปลงสำเร็จ
- [ ] ยอดรวมของสินทรัพย์อัปเดตด้วยจำนวนใหม่
- [ ] เส้นทางการตรวจสอบแสดงการแก้ไข

---

## กรณีทดสอบ 3.9: ลบค่าใช้จ่าย (ถ้ารองรับ)

**วัตถุประสงค์:** ตรวจสอบการลบหรือการกลับรายการค่าใช้จ่าย

**ขั้นตอน:**
1. ไปที่ **การเงิน > ค่าใช้จ่าย**
2. ค้นหาค่าใช้จ่ายที่ต้องการลบ
3. คลิกปุ่ม **ลบ**
4. ยืนยันการลบ

**ผลลัพธ์ที่คาดหวัง:**
- [ ] หน้าต่างยืนยันปรากฏ
- [ ] ค่าใช้จ่ายถูกลบหรือทำเครื่องหมายว่าลบแล้ว
- [ ] ค่าใช้จ่ายรวมของสินทรัพย์ลดลงตามจำนวนที่ลบ
- [ ] ไม่สามารถลบค่าใช้จ่ายจากงวดที่ปิดแล้ว (ถ้ามี)

---

## กรณีทดสอบ 3.10: กรองค่าใช้จ่ายตามหมวดหมู่

**วัตถุประสงค์:** ตรวจสอบการกรองค่าใช้จ่ายตามหมวดหมู่

**ขั้นตอน:**
1. ไปที่ **การเงิน > ค่าใช้จ่าย**
2. ใช้รายการหมวดหมู่เพื่อกรอง
3. เลือกแต่ละหมวดหมู่ตามลำดับ:
   - การบำรุงรักษา
   - ประกันภัย
   - การเงิน
   - อุบัติเหตุ
   - ทะเบียน
   - วัสดุสิ้นเปลือง
   - อื่นๆ

**ผลลัพธ์ที่คาดหวัง:**
- [ ] ตัวกรองแสดงเฉพาะหมวดหมู่ที่เลือกถูกต้อง
- [ ] ตัวเลือก "ทั้งหมด" แสดงค่าใช้จ่ายทั้งหมด
- [ ] จำนวนอัปเดตถูกต้องสำหรับแต่ละตัวกรอง

---

## กรณีทดสอบ 3.11: กรองค่าใช้จ่ายตามช่วงวันที่

**วัตถุประสงค์:** ตรวจสอบการกรองค่าใช้จ่ายตามวันที่

**ขั้นตอน:**
1. ไปที่ **การเงิน > ค่าใช้จ่าย**
2. ตั้งค่าตัวกรองช่วงวันที่:
   - จาก: วันแรกของเดือนปัจจุบัน
   - ถึง: วันนี้
3. ใช้ตัวกรอง

**ผลลัพธ์ที่คาดหวัง:**
- [ ] แสดงเฉพาะค่าใช้จ่ายภายในช่วงวันที่
- [ ] การล้างตัวกรองแสดงค่าใช้จ่ายทั้งหมด
- [ ] ช่วงวันที่ไม่ถูกต้องแสดงข้อผิดพลาดหรือไม่มีผลลัพธ์

---

## หมายเหตุ

- จำนวนทั้งหมดเป็นบาทไทย (THB)
- ตรวจสอบผลกระทบของค่าใช้จ่ายต่อการคำนวณ ROI
- ตรวจสอบว่าแฟล็กหักภาษีได้ถูกจัดเก็บและแสดงอย่างถูกต้อง
