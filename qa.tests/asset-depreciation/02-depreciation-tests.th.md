# การทดสอบค่าเสื่อมราคา

## หมวดหมู่การทดสอบ: การบันทึกค่าเสื่อมราคาและวิธีการคำนวณ

### ข้อกำหนดเบื้องต้น
- ผู้ใช้เข้าสู่ระบบในฐานะ OrgAdmin หรือ ShopManager
- มีสินทรัพย์ที่ใช้งานอยู่อย่างน้อยหนึ่งรายการที่ตั้งค่าการคิดค่าเสื่อมราคาแล้ว
- มีสิทธิ์เข้าถึงเมนูการเงิน

---

## กรณีทดสอบ 2.1: บันทึกค่าเสื่อมราคารายเดือน - วิธีเส้นตรง

**วัตถุประสงค์:** ตรวจสอบการบันทึกค่าเสื่อมราคารายเดือนสำหรับวิธีเส้นตรง

**ข้อมูลทดสอบ:**
- สินทรัพย์: Honda Click 125 (หรือสินทรัพย์ที่มีอยู่)
- ต้นทุนการได้มา: 50,000 บาท
- อายุการใช้งาน: 60 เดือน
- มูลค่าซาก: 5,000 บาท
- ค่าเสื่อมราคารายเดือนที่คาดหวัง: (50,000 - 5,000) / 60 = 750 บาท

**ขั้นตอน:**
1. ไปที่ **การเงิน > ค่าเสื่อมราคา** (หรือ แดชบอร์ดสินทรัพย์ > รันค่าเสื่อมราคารายเดือน)
2. เลือกงวด (เดือน/ปีปัจจุบัน)
3. ค้นหาสินทรัพย์ในรายการ
4. ตรวจสอบจำนวนค่าเสื่อมราคาที่คำนวณได้
5. คลิก **บันทึกค่าเสื่อมราคา** หรือ **ยืนยัน**

**ผลลัพธ์ที่คาดหวัง:**
- [ ] จำนวนที่คำนวณได้เท่ากับ 750 บาท
- [ ] ค่าเสื่อมราคาถูกบันทึกสำเร็จ
- [ ] มูลค่าตามบัญชีปัจจุบันของสินทรัพย์ลดลง 750 บาท
- [ ] ค่าเสื่อมราคาสะสมของสินทรัพย์เพิ่มขึ้น 750 บาท
- [ ] รายการค่าเสื่อมราคาปรากฏในประวัติของสินทรัพย์

---

## กรณีทดสอบ 2.2: บันทึกค่าเสื่อมราคา - วิธียอดลดลง

**วัตถุประสงค์:** ตรวจสอบการคำนวณค่าเสื่อมราคาสำหรับวิธียอดลดลง

**ข้อมูลทดสอบ:**
- สินทรัพย์ที่ตั้งค่าด้วยวิธียอดลดลง
- ต้นทุนการได้มา: 60,000 บาท
- อัตรารายปี: 20%
- มูลค่าตามบัญชีปัจจุบัน: 48,000 บาท
- ค่าเสื่อมราคารายเดือนที่คาดหวัง: 48,000 × (20% / 12) = 800 บาท

**ขั้นตอน:**
1. ไปที่ **การเงิน > ค่าเสื่อมราคา**
2. เลือกงวด
3. ค้นหาสินทรัพย์ที่ใช้วิธียอดลดลง
4. ตรวจสอบจำนวนที่คำนวณได้
5. บันทึกค่าเสื่อมราคา

**ผลลัพธ์ที่คาดหวัง:**
- [ ] จำนวนที่คำนวณได้ประมาณ 800 บาท (เปอร์เซ็นต์ของมูลค่าตามบัญชี)
- [ ] มูลค่าตามบัญชีอัปเดตถูกต้อง
- [ ] รายการแสดง "ยอดลดลง" เป็นวิธี
- [ ] การคำนวณเดือนถัดไปใช้มูลค่าตามบัญชีใหม่ (ต่ำกว่า)

---

## กรณีทดสอบ 2.3: ค่าเสื่อมราคา Day Out of Door เมื่อเช่าครั้งแรก

**วัตถุประสงค์:** ตรวจสอบว่าค่าเสื่อมราคา Day Out of Door เกิดขึ้นอัตโนมัติเมื่อเช่าครั้งแรก

**ข้อมูลทดสอบ:**
- สินทรัพย์ที่ใช้วิธี Day Out of Door
- ต้นทุนการได้มา: 50,000 บาท
- Day Out of Door %: 20%
- ค่าเสื่อมราคาทันทีที่คาดหวัง: 10,000 บาท

**ขั้นตอน:**
1. สร้างการเช่าใหม่สำหรับยานพาหนะที่เชื่อมโยงกับสินทรัพย์นี้
2. ดำเนินการเช็คเอาท์การเช่าให้เสร็จสมบูรณ์
3. ไปที่ **การเงิน > แดชบอร์ดสินทรัพย์**
4. ดูรายละเอียดของสินทรัพย์

**ผลลัพธ์ที่คาดหวัง:**
- [ ] รายการค่าเสื่อมราคาถูกสร้างอัตโนมัติ
- [ ] จำนวนเท่ากับ 10,000 บาท (20% ของ 50,000)
- [ ] ประเภทรายการแสดง "Day Out of Door" หรือคล้ายกัน
- [ ] มูลค่าตามบัญชีปัจจุบันลดลงเหลือ 40,000 บาท
- [ ] สินทรัพย์ถูกทำเครื่องหมาย "เช่าครั้งแรกเสร็จสิ้น"

---

## กรณีทดสอบ 2.4: แทนที่ค่าเสื่อมราคาด้วยตนเอง

**วัตถุประสงค์:** ตรวจสอบความสามารถในการแทนที่ค่าเสื่อมราคาที่คำนวณได้ด้วยจำนวนที่กำหนดเอง

**ขั้นตอน:**
1. ไปที่ **การเงิน > สินทรัพย์ > [เลือกสินทรัพย์]**
2. คลิก **"บันทึกค่าเสื่อมราคา"**
3. ป้อนวันที่งวด
4. ทำเครื่องหมาย **"แทนที่จำนวนที่คำนวณ"**
5. ป้อนจำนวนที่กำหนดเอง: 1,200 บาท
6. ป้อนเหตุผล: "ปรับปรุงสำหรับการสึกหรอเร็วขึ้น"
7. คลิก **บันทึก**

**ผลลัพธ์ที่คาดหวัง:**
- [ ] ช่องทำเครื่องหมายแทนที่เปิดใช้งานการป้อนจำนวนด้วยตนเอง
- [ ] ระบบยอมรับจำนวนที่แทนที่
- [ ] ฟิลด์เหตุผลจำเป็นเมื่อแทนที่
- [ ] รายการถูกบันทึกพร้อมตัวบ่งชี้ประเภท "ด้วยตนเอง"
- [ ] มูลค่าสินทรัพย์อัปเดตถูกต้อง
- [ ] เส้นทางการตรวจสอบแสดงเหตุผลการแทนที่

---

## กรณีทดสอบ 2.5: การประมวลผลค่าเสื่อมราคาเป็นชุด

**วัตถุประสงค์:** ตรวจสอบการบันทึกค่าเสื่อมราคาสำหรับสินทรัพย์หลายรายการพร้อมกัน

**ขั้นตอน:**
1. ไปที่ **การเงิน > ค่าเสื่อมราคา**
2. คลิก **"รันค่าเสื่อมราคารายเดือน"**
3. เลือกงวด (เดือน/ปี)
4. ตรวจสอบรายการสินทรัพย์ที่ต้องการค่าเสื่อมราคา
5. เลือกสินทรัพย์หลายรายการโดยใช้ช่องทำเครื่องหมาย
6. คลิก **"ประมวลผลที่เลือก"** หรือ **"ยืนยันทั้งหมด"**

**ผลลัพธ์ที่คาดหวัง:**
- [ ] สินทรัพย์ที่ใช้งานอยู่ทั้งหมดแสดงในรายการ
- [ ] แสดงจำนวนที่คำนวณได้สำหรับแต่ละสินทรัพย์
- [ ] สามารถเลือกสินทรัพย์หลายรายการได้
- [ ] สินทรัพย์ที่เลือกทั้งหมดถูกประมวลผลสำเร็จ
- [ ] สรุปแสดงค่าเสื่อมราคารวมที่บันทึก
- [ ] บันทึกสินทรัพย์แต่ละรายการอัปเดตถูกต้อง

---

## กรณีทดสอบ 2.6: ค่าเสื่อมราคาหยุดที่มูลค่าซาก

**วัตถุประสงค์:** ตรวจสอบว่าค่าเสื่อมราคาหยุดเมื่อมูลค่าตามบัญชีถึงมูลค่าซาก

**ข้อมูลทดสอบ:**
- สินทรัพย์ที่มีมูลค่าตามบัญชีใกล้มูลค่าซาก
- มูลค่าตามบัญชีปัจจุบัน: 5,500 บาท
- มูลค่าซาก: 5,000 บาท
- ค่าเสื่อมราคารายเดือน (คำนวณ): 750 บาท

**ขั้นตอน:**
1. ไปที่การบันทึกค่าเสื่อมราคา
2. พยายามบันทึกค่าเสื่อมราคาสำหรับสินทรัพย์นี้
3. ตรวจสอบจำนวนที่คำนวณ/อนุญาต

**ผลลัพธ์ที่คาดหวัง:**
- [ ] ระบบคำนวณเพียง 500 บาท (ไม่ใช่ 750)
- [ ] ค่าเสื่อมราคาจำกัดไม่ให้ต่ำกว่ามูลค่าซาก
- [ ] แสดงข้อความเตือนหรือข้อมูล
- [ ] หลังจากบันทึก มูลค่าตามบัญชีเท่ากับ 5,000 บาทพอดี
- [ ] ความพยายามบันทึกค่าเสื่อมราคาในอนาคตแสดง 0 หรือ "เสื่อมราคาครบแล้ว"

---

## กรณีทดสอบ 2.7: ดูประวัติค่าเสื่อมราคา

**วัตถุประสงค์:** ตรวจสอบว่าประวัติค่าเสื่อมราคาทั้งหมดแสดงอยู่

**ขั้นตอน:**
1. ไปที่ **การเงิน > สินทรัพย์ > [เลือกสินทรัพย์ที่มีประวัติ] > รายละเอียด**
2. เลื่อนไปที่ส่วนประวัติค่าเสื่อมราคา
3. ตรวจสอบตารางประวัติ

**ผลลัพธ์ที่คาดหวัง:**
- [ ] รายการค่าเสื่อมราคาทั้งหมดแสดงตามลำดับเวลา
- [ ] แต่ละรายการแสดง:
  - งวด (เดือน/ปีพร้อมวันที่)
  - วิธีที่ใช้
  - มูลค่าตามบัญชีเริ่มต้น
  - จำนวนค่าเสื่อมราคา
  - มูลค่าตามบัญชีสิ้นสุด
  - ประเภทรายการ (ระบบ/ด้วยตนเอง)
- [ ] ยอดรวมตรงกับค่าเสื่อมราคาสะสมในสรุป

---

## กรณีทดสอบ 2.8: ดูการคาดการณ์ค่าเสื่อมราคา

**วัตถุประสงค์:** ตรวจสอบว่าการคาดการณ์ค่าเสื่อมราคาในอนาคตคำนวณถูกต้อง

**ขั้นตอน:**
1. ไปที่ **การเงิน > สินทรัพย์ > [เลือกสินทรัพย์] > รายละเอียด**
2. ค้นหากราฟมูลค่าสินทรัพย์
3. คลิกปุ่มสลับ **"การคาดการณ์"**
4. ตรวจสอบกราฟการคาดการณ์

**ผลลัพธ์ที่คาดหวัง:**
- [ ] กราฟแสดงมูลค่าตามบัญชีที่คาดการณ์ตลอดเวลา
- [ ] การคาดการณ์ขยายไปถึงสิ้นสุดอายุการใช้งาน
- [ ] เส้นมูลค่าตามบัญชีลาดลงอย่างถูกต้อง
- [ ] สิ้นสุดที่มูลค่าซาก (พื้น)
- [ ] แกน Y แสดงค่าจากต้นทุนการได้มาถึงมูลค่าซาก

---

## กรณีทดสอบ 2.9: รายงานค่าเสื่อมราคา - สรุปรายเดือน

**วัตถุประสงค์:** ตรวจสอบมุมมองสรุปรายเดือนของหน้ารายงานค่าเสื่อมราคา

**ขั้นตอน:**
1. ไปที่ **การเงิน > รายงานค่าเสื่อมราคา**
2. เลือกปีปัจจุบัน
3. เลือกประเภทรายงาน **"สรุปรายเดือน"**
4. ตรวจสอบรายงาน

**ผลลัพธ์ที่คาดหวัง:**
- [ ] การ์ดสรุปแสดง:
  - ค่าเสื่อมราคารวมสำหรับปี
  - ค่าเฉลี่ยรายเดือน
  - จำนวนสินทรัพย์ที่เสื่อมราคา
  - จำนวนรายการทั้งหมด
- [ ] แผนภูมิแท่งแสดงรายละเอียดรายเดือน
- [ ] ตารางรายเดือนแสดงแต่ละเดือนพร้อม:
  - จำนวนค่าเสื่อมราคา
  - จำนวนรายการ
  - เปอร์เซ็นต์ของปี

---

## กรณีทดสอบ 2.10: รายงานค่าเสื่อมราคา - มุมมองตามสินทรัพย์

**วัตถุประสงค์:** ตรวจสอบมุมมองตามสินทรัพย์ของหน้ารายงานค่าเสื่อมราคา

**ขั้นตอน:**
1. ไปที่ **การเงิน > รายงานค่าเสื่อมราคา**
2. เลือกปีปัจจุบัน
3. เลือกประเภทรายงาน **"ตามสินทรัพย์"**
4. ตรวจสอบรายงาน

**ผลลัพธ์ที่คาดหวัง:**
- [ ] ตารางแสดงแต่ละสินทรัพย์พร้อม:
  - ชื่อยานพาหนะและทะเบียน
  - มูลค่าตามบัญชีเริ่มต้น (สำหรับปี)
  - ค่าเสื่อมราคารวม (สำหรับปี)
  - มูลค่าตามบัญชีสิ้นสุด
  - จำนวนรายการ
- [ ] ลิงก์ไปยังรายละเอียดสินทรัพย์ทำงาน
- [ ] ยอดรวมด้านล่างตรงกับการ์ดสรุป

---

## กรณีทดสอบ 2.11: ส่งออกรายงานค่าเสื่อมราคา

**วัตถุประสงค์:** ตรวจสอบฟังก์ชันการส่งออกของรายงานค่าเสื่อมราคา

**ขั้นตอน:**
1. ไปที่ **การเงิน > รายงานค่าเสื่อมราคา**
2. เลือกปีและประเภทรายงาน
3. คลิกปุ่ม **"ส่งออก CSV"**
4. เปิดไฟล์ที่ดาวน์โหลด

**ผลลัพธ์ที่คาดหวัง:**
- [ ] ไฟล์ดาวน์โหลดสำเร็จ
- [ ] ไฟล์ CSV เปิดได้ถูกต้องใน Excel/Sheets
- [ ] ข้อมูลตรงกับที่แสดงบนหน้าจอ
- [ ] ส่วนหัวอ่านได้
- [ ] ตัวเลขจัดรูปแบบถูกต้อง

---

## หมายเหตุ

- การคำนวณค่าเสื่อมราคาควรตรวจสอบกับการคำนวณด้วยตนเอง
- บันทึกภาพหน้าจอของค่าที่คำนวณได้เทียบกับที่คาดหวัง
- สังเกตความแตกต่างของการปัดเศษ
