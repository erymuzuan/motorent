---
phase: 08-manager-oversight
plan: 02
type: execute
wave: 2
depends_on: ["08-01"]
files_modified:
  - src/MotoRent.Client/Pages/Manager/TillDashboard.razor
  - src/MotoRent.Client/Pages/Manager/TillDashboard.razor.cs
  - src/MotoRent.Client/Components/Till/ActiveSessionCard.razor
  - src/MotoRent.Client/Components/Till/VarianceAlertBadge.razor
  - src/MotoRent.Client/Resources/Pages/Manager/TillDashboard.resx
  - src/MotoRent.Client/Resources/Pages/Manager/TillDashboard.en.resx
  - src/MotoRent.Client/Resources/Pages/Manager/TillDashboard.th.resx
  - src/MotoRent.Client/Resources/Pages/Manager/TillDashboard.ms.resx
  - src/MotoRent.Client/Resources/Components/Till/ActiveSessionCard.resx
  - src/MotoRent.Client/Resources/Components/Till/ActiveSessionCard.en.resx
  - src/MotoRent.Client/Resources/Components/Till/ActiveSessionCard.th.resx
  - src/MotoRent.Client/Resources/Components/Till/ActiveSessionCard.ms.resx
autonomous: true

must_haves:
  truths:
    - "Manager can see all open till sessions as cards with staff name, balances, and duration"
    - "Manager can see table of recently closed sessions with variance and verification status"
    - "Manager can click Verify on closed session and session becomes Verified"
    - "Sessions with variance exceeding threshold show visual alert indicator"
    - "Dashboard is accessible only to managers via authorization policy"
  artifacts:
    - path: "src/MotoRent.Client/Pages/Manager/TillDashboard.razor"
      provides: "Manager till oversight dashboard page"
      min_lines: 200
    - path: "src/MotoRent.Client/Components/Till/ActiveSessionCard.razor"
      provides: "Card component for active session display"
      min_lines: 50
    - path: "src/MotoRent.Client/Components/Till/VarianceAlertBadge.razor"
      provides: "Bell icon badge showing variance alert count"
      min_lines: 20
    - path: "src/MotoRent.Client/Resources/Pages/Manager/TillDashboard.resx"
      provides: "Localization for dashboard"
  key_links:
    - from: "src/MotoRent.Client/Pages/Manager/TillDashboard.razor"
      to: "TillService.GetAllActiveSessionsAsync"
      via: "data loading"
      pattern: "GetAllActiveSessionsAsync"
    - from: "src/MotoRent.Client/Pages/Manager/TillDashboard.razor"
      to: "TillService.VerifySessionAsync"
      via: "verify button action"
      pattern: "VerifySessionAsync"
---

<objective>
Create the manager till dashboard with active session cards, closed sessions table, and variance alerts.

Purpose: Give managers real-time visibility into all till sessions and allow them to verify closed sessions.
Output: TillDashboard.razor page with ActiveSessionCard and VarianceAlertBadge components, fully localized.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-manager-oversight/08-CONTEXT.md
@.planning/phases/08-manager-oversight/08-RESEARCH.md

@src/MotoRent.Client/Pages/Manager/EndOfDay.razor
@src/MotoRent.Services/TillService.manager.cs
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ActiveSessionCard component</name>
  <files>
    src/MotoRent.Client/Components/Till/ActiveSessionCard.razor
    src/MotoRent.Client/Resources/Components/Till/ActiveSessionCard.resx
    src/MotoRent.Client/Resources/Components/Till/ActiveSessionCard.en.resx
    src/MotoRent.Client/Resources/Components/Till/ActiveSessionCard.th.resx
    src/MotoRent.Client/Resources/Components/Till/ActiveSessionCard.ms.resx
  </files>
  <action>
Create `ActiveSessionCard.razor` in `src/MotoRent.Client/Components/Till/`:

```razor
@using MotoRent.Domain.Entities
@inherits LocalizedComponentBase<ActiveSessionCard>

<div class="card h-100 @(HasVarianceAlert ? "border-warning" : "")">
    <div class="card-body">
        <div class="d-flex align-items-start mb-3">
            <span class="avatar avatar-lg bg-primary-lt me-3">
                <i class="ti ti-user"></i>
            </span>
            <div class="flex-fill">
                <h4 class="mb-0">@Session.StaffDisplayName</h4>
                <small class="text-secondary">
                    <i class="ti ti-clock me-1"></i>
                    @FormatDuration(Session.OpenedAt)
                </small>
            </div>
            @if (HasVarianceAlert)
            {
                <span class="badge bg-warning" title="@Localizer["VarianceAlert"]">
                    <i class="ti ti-alert-triangle"></i>
                </span>
            }
        </div>

        @* Currency balances *@
        <div class="row g-2">
            @foreach (var balance in Session.CurrencyBalances.Where(b => b.Value != 0 || b.Key == SupportedCurrencies.THB))
            {
                <div class="col-6">
                    <small class="text-secondary d-block">@balance.Key</small>
                    <span class="fw-semibold">@FormatAmount(balance.Value, balance.Key)</span>
                </div>
            }
        </div>

        @* Last activity *@
        <div class="mt-3 pt-3 border-top">
            <small class="text-secondary">
                <i class="ti ti-activity me-1"></i>
                @Localizer["LastActivity"]: @GetLastActivityText()
            </small>
        </div>
    </div>
    <div class="card-footer">
        <button type="button" class="btn btn-sm btn-ghost-primary w-100" @onclick="OnViewClick">
            <i class="ti ti-eye me-1"></i>
            @Localizer["ViewDetails"]
        </button>
    </div>
</div>

@code {
    [Parameter, EditorRequired]
    public TillSession Session { get; set; } = null!;

    [Parameter]
    public bool HasVarianceAlert { get; set; }

    [Parameter]
    public EventCallback OnView { get; set; }

    private async Task OnViewClick() => await OnView.InvokeAsync();

    private string FormatDuration(DateTimeOffset startTime)
    {
        var duration = DateTimeOffset.Now - startTime;
        if (duration.TotalHours >= 1)
            return string.Format(Localizer["DurationHoursMinutes"], (int)duration.TotalHours, duration.Minutes);
        return string.Format(Localizer["DurationMinutes"], (int)duration.TotalMinutes);
    }

    private string FormatAmount(decimal amount, string currency)
    {
        return currency == SupportedCurrencies.THB
            ? amount.ToString("N0")
            : amount.ToString("N2");
    }

    private string GetLastActivityText()
    {
        // For now, just show "Active" - can enhance with transaction tracking later
        return Localizer["Active"];
    }
}
```

Create localization files in `src/MotoRent.Client/Resources/Components/Till/`:

**ActiveSessionCard.resx** (default):
- VarianceAlert = "Variance exceeds threshold"
- LastActivity = "Last Activity"
- ViewDetails = "View Details"
- DurationHoursMinutes = "{0}h {1}m"
- DurationMinutes = "{0} min"
- Active = "Active"

**ActiveSessionCard.en.resx**: Same as default

**ActiveSessionCard.th.resx**:
- VarianceAlert = "ส่วนต่างเกินเกณฑ์"
- LastActivity = "กิจกรรมล่าสุด"
- ViewDetails = "ดูรายละเอียด"
- DurationHoursMinutes = "{0} ชม. {1} นาที"
- DurationMinutes = "{0} นาที"
- Active = "ใช้งานอยู่"

**ActiveSessionCard.ms.resx**:
- VarianceAlert = "Perbezaan melebihi ambang"
- LastActivity = "Aktiviti Terakhir"
- ViewDetails = "Lihat Butiran"
- DurationHoursMinutes = "{0}j {1}m"
- DurationMinutes = "{0} min"
- Active = "Aktif"
  </action>
  <verify>
File exists and compiles: `dotnet build src/MotoRent.Client`
Component renders: Check for no build errors
  </verify>
  <done>
ActiveSessionCard.razor component shows session with staff name, duration, per-currency balances, and variance indicator. All 4 resx files created.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create VarianceAlertBadge component</name>
  <files>src/MotoRent.Client/Components/Till/VarianceAlertBadge.razor</files>
  <action>
Create `VarianceAlertBadge.razor` in `src/MotoRent.Client/Components/Till/`:

```razor
@using MotoRent.Domain.Entities
@using MotoRent.Domain.Settings
@inject TillService TillService
@inject ShopService ShopService
@inject ISettingConfig SettingConfig

<a href="/manager/till-dashboard" class="nav-link position-relative px-2" title="Till Sessions">
    <i class="ti ti-bell fs-3"></i>
    @if (m_alertCount > 0)
    {
        <span class="badge bg-danger position-absolute" style="top: 0; right: 0; transform: translate(25%, -25%); font-size: 0.65rem; min-width: 1.2rem;">
            @(m_alertCount > 9 ? "9+" : m_alertCount.ToString())
        </span>
    }
</a>

@code {
    private int m_alertCount;
    private int m_shopId;

    protected override async Task OnInitializedAsync()
    {
        // Get current shop
        var shops = await ShopService.GetShopsAsync(page: 1, pageSize: 1);
        if (shops.ItemCollection.Any())
        {
            m_shopId = shops.ItemCollection.First().ShopId;
        }

        if (m_shopId > 0)
        {
            // Get threshold from settings, default 100 THB
            var thresholdStr = await SettingConfig.GetSettingAsync(SettingKeys.Till_VarianceAlertThreshold);
            var threshold = decimal.TryParse(thresholdStr, out var t) ? t : 100m;

            m_alertCount = await TillService.GetVarianceAlertCountAsync(m_shopId, threshold);
        }
    }
}
```

Note: This component does not need localization files as it has no visible text (just icon and number).
  </action>
  <verify>
File exists and compiles: `dotnet build src/MotoRent.Client`
  </verify>
  <done>
VarianceAlertBadge.razor component shows bell icon with red badge count when sessions exceed variance threshold.
  </done>
</task>

<task type="auto">
  <name>Task 3: Create TillDashboard page with active sessions and closed sessions table</name>
  <files>
    src/MotoRent.Client/Pages/Manager/TillDashboard.razor
    src/MotoRent.Client/Resources/Pages/Manager/TillDashboard.resx
    src/MotoRent.Client/Resources/Pages/Manager/TillDashboard.en.resx
    src/MotoRent.Client/Resources/Pages/Manager/TillDashboard.th.resx
    src/MotoRent.Client/Resources/Pages/Manager/TillDashboard.ms.resx
  </files>
  <action>
Create `TillDashboard.razor` in `src/MotoRent.Client/Pages/Manager/`:

```razor
@page "/manager/till-dashboard"
@using MotoRent.Domain.Entities
@using MotoRent.Domain.Settings
@using MotoRent.Services
@using Microsoft.AspNetCore.Authorization
@inherits LocalizedComponentBase<TillDashboard>
@attribute [Authorize(Policy = "RequireTenantManager")]
@inject TillService TillService
@inject ShopService ShopService
@inject ISettingConfig SettingConfig
@inject ExchangeRateService ExchangeRateService

<PageTitle>@Localizer["PageTitle"]</PageTitle>

<div class="container-xl py-4">
    <div class="page-header mb-4">
        <div class="row align-items-center">
            <div class="col">
                <h2 class="page-title">
                    <i class="ti ti-layout-dashboard me-2"></i>
                    @Localizer["TillDashboard"]
                </h2>
                <small class="text-secondary">@Localizer["DashboardSubtitle"]</small>
            </div>
            <div class="col-auto">
                <button type="button" class="btn btn-ghost-primary" @onclick="RefreshAsync">
                    <i class="ti ti-refresh me-1"></i>
                    @Localizer["Refresh"]
                </button>
            </div>
        </div>
    </div>

    @if (m_loading)
    {
        <div class="progress progress-sm mb-3">
            <div class="progress-bar progress-bar-indeterminate"></div>
        </div>
    }
    else
    {
        @* Section 1: Active Sessions Cards *@
        <div class="mb-4">
            <h3 class="mb-3">
                @Localizer["ActiveSessions"]
                <span class="badge bg-primary ms-2">@m_activeSessions.Count</span>
            </h3>

            @if (m_activeSessions.Count == 0)
            {
                <div class="alert alert-info">
                    <i class="ti ti-info-circle me-2"></i>
                    @Localizer["NoActiveSessions"]
                </div>
            }
            else
            {
                <div class="row g-3">
                    @foreach (var session in m_activeSessions)
                    {
                        <div class="col-md-4 col-lg-3">
                            <ActiveSessionCard Session="@session"
                                HasVarianceAlert="@(false)"
                                OnView="@(() => ViewSessionDetails(session))" />
                        </div>
                    }
                </div>
            }
        </div>

        @* Section 2: Closed Sessions Table *@
        <div class="card">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h4 class="card-title mb-0">
                    @Localizer["RecentClosedSessions"]
                    <span class="badge bg-secondary ms-2">@m_closedSessions.Count</span>
                </h4>
                <div class="d-flex gap-2 align-items-center">
                    <select class="form-select form-select-sm" style="width: auto;" @bind="m_daysFilter" @bind:after="RefreshAsync">
                        <option value="1">@Localizer["Today"]</option>
                        <option value="3">@Localizer["Last3Days"]</option>
                        <option value="7">@Localizer["Last7Days"]</option>
                    </select>
                    @if (m_closedSessions.Any(s => s.Status is TillSessionStatus.Closed or TillSessionStatus.ClosedWithVariance))
                    {
                        <button type="button" class="btn btn-sm btn-primary" @onclick="VerifyAllPendingAsync">
                            <i class="ti ti-check-all me-1"></i>
                            @Localizer["VerifyAll"]
                        </button>
                    }
                </div>
            </div>

            @if (m_closedSessions.Count == 0)
            {
                <div class="card-body">
                    <div class="text-center text-secondary py-4">
                        <i class="ti ti-clipboard-off fs-1 mb-2 d-block"></i>
                        @Localizer["NoClosedSessions"]
                    </div>
                </div>
            }
            else
            {
                <div class="table-responsive">
                    <table class="table table-vcenter card-table">
                        <thead>
                            <tr>
                                <th>@Localizer["Staff"]</th>
                                <th>@Localizer["ClosedAt"]</th>
                                <th>@Localizer["Duration"]</th>
                                <th class="text-end">@Localizer["TotalVariance"]</th>
                                <th>@Localizer["Status"]</th>
                                <th class="w-1"></th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var session in m_closedSessions)
                            {
                                var varianceThb = m_sessionVariances.TryGetValue(session.TillSessionId, out var v) ? v : session.Variance;
                                var hasAlert = Math.Abs(varianceThb) > m_threshold;

                                <tr class="@(hasAlert ? "table-warning" : "")">
                                    <td>
                                        <div class="d-flex align-items-center">
                                            <span class="avatar avatar-sm bg-secondary-lt me-2">
                                                <i class="ti ti-user"></i>
                                            </span>
                                            @session.StaffDisplayName
                                        </div>
                                    </td>
                                    <td>
                                        <small>@session.ClosedAt?.ToString("dd MMM HH:mm")</small>
                                    </td>
                                    <td>
                                        <small>@FormatDuration(session.OpenedAt, session.ClosedAt)</small>
                                    </td>
                                    <td class="text-end">
                                        <span class="@GetVarianceClass(varianceThb)">
                                            @(varianceThb >= 0 ? "+" : "")@varianceThb.ToString("N0") THB
                                        </span>
                                        @if (hasAlert)
                                        {
                                            <i class="ti ti-alert-triangle text-warning ms-1"></i>
                                        }
                                    </td>
                                    <td>
                                        <span class="badge @GetStatusBadgeClass(session.Status)">
                                            @GetStatusText(session.Status)
                                        </span>
                                    </td>
                                    <td>
                                        <div class="btn-group">
                                            <button type="button" class="btn btn-sm btn-ghost-secondary"
                                                    title="@Localizer["ViewDetails"]"
                                                    @onclick="@(() => ViewSessionDetails(session))">
                                                <i class="ti ti-eye"></i>
                                            </button>
                                            @if (session.Status is TillSessionStatus.Closed or TillSessionStatus.ClosedWithVariance)
                                            {
                                                <button type="button" class="btn btn-sm btn-ghost-success"
                                                        title="@Localizer["Verify"]"
                                                        @onclick="@(() => VerifySessionAsync(session))">
                                                    <i class="ti ti-check"></i>
                                                </button>
                                            }
                                            <button type="button" class="btn btn-sm btn-ghost-primary"
                                                    title="@Localizer["HandoverReport"]"
                                                    @onclick="@(() => ShowHandoverReportAsync(session))">
                                                <i class="ti ti-file-text"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            }
        </div>
    }
</div>

@code {
    private bool m_loading = true;
    private int m_shopId;
    private int m_daysFilter = 1;
    private decimal m_threshold = 100m;

    private List<TillSession> m_activeSessions = [];
    private List<TillSession> m_closedSessions = [];
    private Dictionary<int, decimal> m_sessionVariances = new();

    protected override async Task OnInitializedAsync()
    {
        // Get current shop
        var shops = await ShopService.GetShopsAsync(page: 1, pageSize: 1);
        if (shops.ItemCollection.Any())
        {
            m_shopId = shops.ItemCollection.First().ShopId;
        }

        // Get threshold from settings
        var thresholdStr = await SettingConfig.GetSettingAsync(SettingKeys.Till_VarianceAlertThreshold);
        if (decimal.TryParse(thresholdStr, out var t))
            m_threshold = t;

        await RefreshAsync();
    }

    private async Task RefreshAsync()
    {
        if (m_shopId == 0) return;

        try
        {
            m_loading = true;
            StateHasChanged();

            m_activeSessions = await TillService.GetAllActiveSessionsAsync(m_shopId);
            m_closedSessions = await TillService.GetRecentClosedSessionsAsync(m_shopId, m_daysFilter);

            // Pre-calculate THB variances for closed sessions
            m_sessionVariances.Clear();
            foreach (var session in m_closedSessions)
            {
                var varianceThb = await TillService.GetTotalVarianceInThbAsync(session);
                m_sessionVariances[session.TillSessionId] = varianceThb;
            }
        }
        catch (Exception ex)
        {
            Logger.LogError(ex, "Error loading till dashboard data");
            ShowError(Localizer["LoadFailed"]);
        }
        finally
        {
            m_loading = false;
        }
    }

    private async Task ViewSessionDetails(TillSession session)
    {
        await DialogService.Create<EodSessionDetailDialog>(Localizer["SessionDetails"])
            .WithParameter(x => x.SessionId, session.TillSessionId)
            .WithSize(ModalSize.Large)
            .ShowDialogAsync();
    }

    private async Task VerifySessionAsync(TillSession session)
    {
        var confirmed = await DialogService.ConfirmYesNoAsync(
            string.Format(Localizer["VerifyConfirmation"], session.StaffDisplayName),
            Localizer["VerifySession"]);

        if (!confirmed) return;

        var result = await TillService.VerifySessionAsync(session.TillSessionId, UserName);
        if (result.Successful)
        {
            ShowSuccess(Localizer["SessionVerified"]);
            await RefreshAsync();
        }
        else
        {
            ShowError(result.Message ?? Localizer["VerifyFailed"]);
        }
    }

    private async Task VerifyAllPendingAsync()
    {
        var pending = m_closedSessions
            .Where(s => s.Status is TillSessionStatus.Closed or TillSessionStatus.ClosedWithVariance)
            .Where(s => s.StaffUserName != UserName) // Exclude own sessions
            .ToList();

        if (pending.Count == 0)
        {
            ShowInfo(Localizer["NoSessionsToVerify"]);
            return;
        }

        var confirmed = await DialogService.ConfirmYesNoAsync(
            string.Format(Localizer["VerifyAllConfirmation"], pending.Count),
            Localizer["VerifyAll"]);

        if (!confirmed) return;

        int verified = 0;
        foreach (var session in pending)
        {
            var result = await TillService.VerifySessionAsync(session.TillSessionId, UserName);
            if (result.Successful) verified++;
        }

        ShowSuccess(string.Format(Localizer["VerifiedCount"], verified));
        await RefreshAsync();
    }

    private async Task ShowHandoverReportAsync(TillSession session)
    {
        await DialogService.Create<HandoverReportDialog>(Localizer["HandoverReport"])
            .WithParameter(x => x.SessionId, session.TillSessionId)
            .WithSize(ModalSize.Large)
            .ShowDialogAsync();
    }

    private string FormatDuration(DateTimeOffset start, DateTimeOffset? end)
    {
        var duration = (end ?? DateTimeOffset.Now) - start;
        if (duration.TotalHours >= 1)
            return $"{(int)duration.TotalHours}h {duration.Minutes}m";
        return $"{(int)duration.TotalMinutes}m";
    }

    private static string GetVarianceClass(decimal variance)
    {
        if (variance == 0) return "text-success";
        if (variance > 0) return "text-info";
        return "text-danger fw-bold";
    }

    private static string GetStatusBadgeClass(TillSessionStatus status) => status switch
    {
        TillSessionStatus.Closed => "bg-success-lt text-success",
        TillSessionStatus.ClosedWithVariance => "bg-warning-lt text-warning",
        TillSessionStatus.Verified => "bg-success",
        _ => "bg-secondary"
    };

    private string GetStatusText(TillSessionStatus status) => status switch
    {
        TillSessionStatus.Closed => Localizer["StatusClosed"],
        TillSessionStatus.ClosedWithVariance => Localizer["StatusVariance"],
        TillSessionStatus.Verified => Localizer["StatusVerified"],
        _ => status.ToString()
    };
}
```

Create localization files in `src/MotoRent.Client/Resources/Pages/Manager/`:

**TillDashboard.resx** (default):
- PageTitle = "Till Dashboard"
- TillDashboard = "Till Dashboard"
- DashboardSubtitle = "Monitor active sessions and verify closed sessions"
- Refresh = "Refresh"
- ActiveSessions = "Active Sessions"
- NoActiveSessions = "No active till sessions"
- RecentClosedSessions = "Recent Closed Sessions"
- NoClosedSessions = "No closed sessions in this period"
- Today = "Today"
- Last3Days = "Last 3 days"
- Last7Days = "Last 7 days"
- Staff = "Staff"
- ClosedAt = "Closed At"
- Duration = "Duration"
- TotalVariance = "Variance (THB)"
- Status = "Status"
- ViewDetails = "View Details"
- Verify = "Verify"
- VerifyAll = "Verify All"
- HandoverReport = "Handover Report"
- SessionDetails = "Session Details"
- VerifySession = "Verify Session"
- VerifyConfirmation = "Verify session for {0}?"
- VerifyAllConfirmation = "Verify all {0} pending sessions?"
- SessionVerified = "Session verified successfully"
- VerifyFailed = "Failed to verify session"
- NoSessionsToVerify = "No sessions available to verify"
- VerifiedCount = "{0} sessions verified"
- LoadFailed = "Failed to load dashboard data"
- StatusClosed = "Closed"
- StatusVariance = "Variance"
- StatusVerified = "Verified"

**TillDashboard.en.resx**: Same as default

**TillDashboard.th.resx**:
- PageTitle = "แดชบอร์ดลิ้นชัก"
- TillDashboard = "แดชบอร์ดลิ้นชัก"
- DashboardSubtitle = "ตรวจสอบเซสชันที่ใช้งานและยืนยันเซสชันที่ปิด"
- Refresh = "รีเฟรช"
- ActiveSessions = "เซสชันที่ใช้งานอยู่"
- NoActiveSessions = "ไม่มีเซสชันลิ้นชักที่ใช้งานอยู่"
- RecentClosedSessions = "เซสชันที่ปิดล่าสุด"
- NoClosedSessions = "ไม่มีเซสชันที่ปิดในช่วงนี้"
- Today = "วันนี้"
- Last3Days = "3 วันล่าสุด"
- Last7Days = "7 วันล่าสุด"
- Staff = "พนักงาน"
- ClosedAt = "ปิดเมื่อ"
- Duration = "ระยะเวลา"
- TotalVariance = "ส่วนต่าง (THB)"
- Status = "สถานะ"
- ViewDetails = "ดูรายละเอียด"
- Verify = "ยืนยัน"
- VerifyAll = "ยืนยันทั้งหมด"
- HandoverReport = "รายงานส่งมอบ"
- SessionDetails = "รายละเอียดเซสชัน"
- VerifySession = "ยืนยันเซสชัน"
- VerifyConfirmation = "ยืนยันเซสชันของ {0}?"
- VerifyAllConfirmation = "ยืนยันเซสชันที่รอดำเนินการทั้งหมด {0} รายการ?"
- SessionVerified = "ยืนยันเซสชันสำเร็จ"
- VerifyFailed = "ยืนยันเซสชันไม่สำเร็จ"
- NoSessionsToVerify = "ไม่มีเซสชันที่จะยืนยัน"
- VerifiedCount = "ยืนยัน {0} เซสชัน"
- LoadFailed = "โหลดข้อมูลแดชบอร์ดไม่สำเร็จ"
- StatusClosed = "ปิดแล้ว"
- StatusVariance = "มีส่วนต่าง"
- StatusVerified = "ยืนยันแล้ว"

**TillDashboard.ms.resx**:
- PageTitle = "Papan Pemuka Till"
- TillDashboard = "Papan Pemuka Till"
- DashboardSubtitle = "Pantau sesi aktif dan sahkan sesi tertutup"
- Refresh = "Muat Semula"
- ActiveSessions = "Sesi Aktif"
- NoActiveSessions = "Tiada sesi till aktif"
- RecentClosedSessions = "Sesi Tertutup Baru-baru Ini"
- NoClosedSessions = "Tiada sesi tertutup dalam tempoh ini"
- Today = "Hari Ini"
- Last3Days = "3 Hari Lalu"
- Last7Days = "7 Hari Lalu"
- Staff = "Kakitangan"
- ClosedAt = "Ditutup Pada"
- Duration = "Tempoh"
- TotalVariance = "Perbezaan (THB)"
- Status = "Status"
- ViewDetails = "Lihat Butiran"
- Verify = "Sahkan"
- VerifyAll = "Sahkan Semua"
- HandoverReport = "Laporan Serah Tugas"
- SessionDetails = "Butiran Sesi"
- VerifySession = "Sahkan Sesi"
- VerifyConfirmation = "Sahkan sesi untuk {0}?"
- VerifyAllConfirmation = "Sahkan semua {0} sesi yang tertunda?"
- SessionVerified = "Sesi berjaya disahkan"
- VerifyFailed = "Gagal mengesahkan sesi"
- NoSessionsToVerify = "Tiada sesi untuk disahkan"
- VerifiedCount = "{0} sesi disahkan"
- LoadFailed = "Gagal memuatkan data papan pemuka"
- StatusClosed = "Ditutup"
- StatusVariance = "Perbezaan"
- StatusVerified = "Disahkan"
  </action>
  <verify>
Build succeeds: `dotnet build src/MotoRent.Client`
Page accessible at /manager/till-dashboard
  </verify>
  <done>
TillDashboard.razor page shows active session cards and closed sessions table with verify button, filter dropdown, and handover report button. All 4 resx files created with 32 keys each.
  </done>
</task>

</tasks>

<verification>
1. `dotnet build` succeeds for entire solution
2. Navigate to /manager/till-dashboard shows page
3. Active sessions display as cards (if any exist)
4. Closed sessions display in table
5. Verify button updates session status
6. Sessions exceeding variance threshold show warning indicator
7. VarianceAlertBadge shows count when threshold exceeded
</verification>

<success_criteria>
- Manager dashboard page renders without errors
- Active sessions show as cards with staff name, duration, balances
- Closed sessions table shows staff, close time, variance, status
- Verify button works and prevents self-verification
- Date filter (Today/3 days/7 days) filters closed sessions
- Localization works in English, Thai, and Malay
</success_criteria>

<output>
After completion, create `.planning/phases/08-manager-oversight/08-02-SUMMARY.md` using summary template.
</output>
